{"title":"HTTP协议","date":"2020-03-13T14:49:03.000Z","date_formatted":{"ll":"Mar 13, 2020","L":"03/13/2020","MM-DD":"03-13"},"thumbnail":"post/计算机网络/HTTP协议/cover.jpg","link":"post/计算机网络/HTTP协议","categories":["计算机网络"],"updated":"2020-03-13T14:53:15.299Z","content":"<h1 id=\"http协议层次\">HTTP协议层次<a href=\"#http协议层次\" title=\"HTTP协议层次\"></a></h1><p>位于应用层，基于传输层的TCP协议。</p>\n<h1 id=\"url统一资源定位符\">URL统一资源定位符<a href=\"#url统一资源定位符\" title=\"URL统一资源定位符\"></a></h1><h2 id=\"格式\">格式<a href=\"#格式\" title=\"格式\"></a></h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">传输协议:&#x2F;&#x2F;域名或IP:端口号 + 路径 + 文件名</span><br></pre></td></tr></table></figure>\n\n<ul><li><a href=\"http://localhost:8080/pages/index.html\" target=\"_blank\">http://localhost:8080/pages/index.html</a></li>\n</ul><h1 id=\"http协议格式\">HTTP协议格式<a href=\"#http协议格式\" title=\"HTTP协议格式\"></a></h1><h2 id=\"请求报文\">请求报文<a href=\"#请求报文\" title=\"请求报文\"></a></h2><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/image-20200313212922297.png\" class=\"\">\n\n<h3 id=\"方法\">方法<a href=\"#方法\" title=\"方法\"></a></h3><ul><li>GET<ul><li>请求指定资源</li>\n</ul></li>\n<li>HEAD<ul><li>请求URL指定的资源的元信息<ul><li>大小</li>\n<li>最后修改时间</li>\n<li>...</li>\n</ul></li>\n</ul></li>\n<li>POST<ul><li>客户端向服务端发送资源</li>\n<li>有请求体（Request Body）</li>\n</ul></li>\n<li>PUT<ul><li>请求修改URL指定的资源</li>\n<li>有请求体（Request Body）</li>\n</ul></li>\n<li>DELETE<ul><li>请求删除URL指定的资源</li>\n</ul></li>\n</ul><h3 id=\"http版本\">HTTP版本<a href=\"#http版本\" title=\"HTTP版本\"></a></h3><ul><li>HTTP/0.9</li>\n<li>HTTP/1.0</li>\n<li>HTTP/1.1</li>\n</ul><h4 id=\"http11特点\">HTTP/1.1特点<a href=\"#http11特点\" title=\"HTTP/1.1特点\"></a></h4><ul><li>持续连接：允许一个TCP连接上进行多次HTTP请求与响应</li>\n<li>流水线技术：允许用户在一个响应返回前发送下一个请求</li>\n</ul><h2 id=\"响应报文\">响应报文<a href=\"#响应报文\" title=\"响应报文\"></a></h2><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/image-20200313213324228.png\" class=\"\">\n\n<h3 id=\"状态码\">状态码<a href=\"#状态码\" title=\"状态码\"></a></h3><h4 id=\"分类\">分类<a href=\"#分类\" title=\"分类\"></a></h4><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/image-20200313213349059.png\" class=\"\">\n\n<h4 id=\"常见状态码\">常见状态码<a href=\"#常见状态码\" title=\"常见状态码\"></a></h4><div class=\"cz\"><div class=\"db\"><table><thead><tr>\n<th>状态码</th><th>解释</th></tr>\n</thead><tbody><tr>\n<td>200</td><td>OK - 请求成功</td></tr>\n<tr>\n<td>301</td><td>Moved Permanently - 资源被永久转移到其它URL</td></tr>\n<tr>\n<td>400</td><td>Bad Request - 客户端请求有语法错误，不能被服务器所理解</td></tr>\n<tr>\n<td>401</td><td>Unauthorized - 请求未经授权</td></tr>\n<tr>\n<td>404</td><td>Not Found - 请求资源不存在</td></tr>\n<tr>\n<td>500</td><td>Internal Server Error - 服务器内部发生了不可预期的错误</td></tr>\n<tr>\n<td>503</td><td>Server Unavailable - 服务器当前不能处理客户端的请求，一段时间后可能恢复正常。</td></tr>\n</tbody></table></div></div><h1 id=\"http首部\">HTTP首部<a href=\"#http首部\" title=\"HTTP首部\"></a></h1><h2 id=\"分类-1\">分类<a href=\"#分类-1\" title=\"分类\"></a></h2><ul><li>通用首部</li>\n<li>请求首部</li>\n<li>响应首部</li>\n<li>实体首部</li>\n<li>拓展首部</li>\n</ul><h2 id=\"常见通用首部\">常见通用首部<a href=\"#常见通用首部\" title=\"常见通用首部\"></a></h2><div class=\"cz\"><div class=\"db\"><table><thead><tr>\n<th>首部名称</th><th>功能</th></tr>\n</thead><tbody><tr>\n<td>Connection</td><td>Keep-Alive：可进行TCP连接复用</td></tr>\n</tbody></table></div></div><h2 id=\"常用请求首部\">常用请求首部<a href=\"#常用请求首部\" title=\"常用请求首部\"></a></h2><div class=\"cz\"><div class=\"db\"><table><thead><tr>\n<th>首部名称</th><th>功能</th></tr>\n</thead><tbody><tr>\n<td>Host</td><td>服务器的主机名和端口</td></tr>\n<tr>\n<td>Referer</td><td>当前请求的URL</td></tr>\n<tr>\n<td>Accept</td><td>告诉服务器能够发送的媒体类型</td></tr>\n<tr>\n<td>Accept-Charset</td><td>告诉服务器能够发送的字符集</td></tr>\n<tr>\n<td>Accept-Encoding</td><td>告诉服务器能够发送的编码方式</td></tr>\n<tr>\n<td>Accept-Language</td><td>告诉服务器能够发送的语言</td></tr>\n<tr>\n<td>Cookie</td><td>客户端需要发送的cookie</td></tr>\n<tr>\n<td>User-Agent</td><td>客户端程序信息</td></tr>\n<tr>\n<td>Content-Type</td><td>请求数据的MIME类型</td></tr>\n</tbody></table></div></div><h2 id=\"常见响应首部\">常见响应首部<a href=\"#常见响应首部\" title=\"常见响应首部\"></a></h2><div class=\"cz\"><div class=\"db\"><table><thead><tr>\n<th>首部名称</th><th>功能</th></tr>\n</thead><tbody><tr>\n<td>Server</td><td>服务器应用软件名称及版本</td></tr>\n<tr>\n<td>Accept-Range</td><td>服务器可以接受的范围类型</td></tr>\n<tr>\n<td>Set-Cookie</td><td>设置cookie</td></tr>\n</tbody></table></div></div><h1 id=\"https\">HTTPS<a href=\"#https\" title=\"HTTPS\"></a></h1><h2 id=\"http缺点\">HTTP缺点<a href=\"#http缺点\" title=\"HTTP缺点\"></a></h2><ul><li>明文传输</li>\n<li>数据可被篡改</li>\n</ul><h2 id=\"ssl\">SSL<a href=\"#ssl\" title=\"SSL\"></a></h2><p>HTTPS增加了一个SSL（安全套接字层）提供安全支持。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-3db9b326b9d31745229a26a877a1308c_720w.jpg\" class=\"\">\n\n<p><strong>协议</strong></p>\n<ul><li>SSL</li>\n<li>TSL</li>\n</ul><h2 id=\"加密\">加密<a href=\"#加密\" title=\"加密\"></a></h2><h3 id=\"对称加密\">对称加密<a href=\"#对称加密\" title=\"对称加密\"></a></h3><p>加密和揭秘使用同一个秘钥。</p>\n<p><strong>缺点</strong></p>\n<ul><li>第一次传输密钥时还是明文，可被截获</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-f44db3085c661cd5ed65ec091333e45e_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-b9b8b0d8bd2faff248b085a34629a28f_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-aff24615cc6e366c27166f222aafb2eb_720w.jpg\" class=\"\">\n\n<h3 id=\"非对称加密\">非对称加密<a href=\"#非对称加密\" title=\"非对称加密\"></a></h3><p>非对称加密中有公钥和密钥。</p>\n<p><strong>客户端</strong></p>\n<ul><li>公钥：clientPublicKey</li>\n<li>密钥：clientPrivateKey</li>\n</ul><p><strong>服务器</strong></p>\n<ul><li>公钥：serverPublicKey</li>\n<li>密钥：serverPrivateKey</li>\n</ul><p><strong>客户端发送到服务器</strong></p>\n<ul><li>客户端使用serverPublicKey加密</li>\n<li>服务器使用serverPrivateKey解密</li>\n</ul><p><strong>服务器发送到客户端</strong></p>\n<ul><li>服务器使用clientPublicKey加密</li>\n<li>客户端使用clientPrivateKey解密</li>\n</ul><p><strong>缺点</strong></p>\n<ul><li>非对称加密次数多，开销大</li>\n</ul><h3 id=\"非对称加密--对称加密\">非对称加密 + 对称加密<a href=\"#非对称加密--对称加密\" title=\"非对称加密 + 对称加密\"></a></h3><p><strong>服务器</strong></p>\n<ul><li>公钥：serverPublicKey</li>\n<li>密钥：serverPrivateKey</li>\n</ul><p><strong>客户端</strong></p>\n<ul><li>收到服务器的公钥后，在本地生成一个对称加密的密钥X</li>\n<li>使用serverPublicKey将密钥X加密发送给服务器</li>\n</ul><p><strong>通信</strong></p>\n<ul><li>双方通信都使用密钥X进行对称加密</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-f3ab1daafe9daa179a15d447467c7aed_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-d2daf8ba5615dc9d427a6fe3d20d1031_720w.jpg\" class=\"\">\n\n<p><strong>缺点</strong></p>\n<p>存在中间人攻击。</p>\n<ul><li>将服务器发来的公钥替换为自己的公钥</li>\n<li>将客户端发送给服务器的密钥X解密获取<ul><li>知道了密钥X，就可解密所有信息</li>\n</ul></li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-9a458296959c052b026560a5892368f2_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-5123c1a68be44a178c6f6c1543dfc3f1_720w.jpg\" class=\"\">\n\n<h3 id=\"数字证书\">数字证书<a href=\"#数字证书\" title=\"数字证书\"></a></h3><p>为了防止公钥传输时被篡改，我们可以使用数字签名技术。</p>\n<h4 id=\"数字签名\">数字签名<a href=\"#数字签名\" title=\"数字签名\"></a></h4><p>数字签名主要用来保证数据不可被篡改。</p>\n<ol><li>数据摘要<ul><li>对要发送的数据取Hash</li>\n</ul></li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/bg2011080905.png\" class=\"\">\n\n<ol><li>私钥加密生成签名<ul><li>使用私钥生成签名，这样就没有人能够伪造签名</li>\n</ul></li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/bg2011080906.png\" class=\"\">\n\n<ol><li>将签名与数据一起发送</li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/bg2011080907.png\" class=\"\">\n\n<ol><li>接收方收到数据后进行数据完整性验证<ul><li>将数据生成摘要</li>\n<li>用发送方的公钥解密签名得到解密后的摘要</li>\n<li>将自己生成的摘要和解密后的摘要对比<ul><li>相同：没有被篡改</li>\n<li>不相同：被篡改了</li>\n</ul></li>\n</ul></li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/bg2011080908.png\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/bg2011080909.png\" class=\"\">\n\n<h4 id=\"数字证书-1\">数字证书<a href=\"#数字证书-1\" title=\"数字证书\"></a></h4><p>数字证书由CA机构颁发，数字证书其实就是一个对公钥的签名，由CA机构用其密钥进行签署，保证其不被篡改。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/bg2011080911.png\" class=\"\">\n\n<h4 id=\"通信过程\">通信过程<a href=\"#通信过程\" title=\"通信过程\"></a></h4><p>其实就是在对称加密 + 非对称加密的基础上，将明文传输服务器公钥，变成了传输服务器的公钥的数字证书。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-4a394ede38b526839ce8ada8643934c6_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-35e555a8c74fbddc32ff610819480936_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-123b8861cdefd9a322760ec7591f1cde_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-e8288a959d6fbd5019fa91c0e0b370f2_720w.jpg\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP%E5%8D%8F%E8%AE%AE/v2-4e1c4a6836c8a4b0c7511a0d21710664_720w.jpg\" class=\"\">\n\n<h1 id=\"参考\">参考<a href=\"#参考\" title=\"参考\"></a></h1><ol><li><p><a href=\"https://zhuanlan.zhihu.com/p/57142784\" target=\"_blank\">漫画：什么是 HTTPS 协议？</a></p>\n</li>\n<li><p><a href=\"https://zhuanlan.zhihu.com/p/43789231\" target=\"_blank\">彻底搞懂HTTPS的加密机制</a></p>\n</li>\n<li><p><a href=\"http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html\" target=\"_blank\">数字签名是什么？</a></p>\n</li>\n</ol>","prev":{"title":"IP协议","link":"post/计算机网络/IP协议"},"next":{"title":"DNS协议","link":"post/计算机网络/DNS协议"},"plink":"https://beginc.github.io/post/计算机网络/HTTP协议/","toc":[{"id":"http协议层次","title":"HTTP协议层次","index":"1"},{"id":"url统一资源定位符","title":"URL统一资源定位符","index":"2","children":[{"id":"格式","title":"格式","index":"2.1"}]},{"id":"http协议格式","title":"HTTP协议格式","index":"3","children":[{"id":"请求报文","title":"请求报文","index":"3.1","children":[{"id":"方法","title":"方法","index":"3.1.1"},{"id":"http版本","title":"HTTP版本","index":"3.1.2"}]},{"id":"响应报文","title":"响应报文","index":"3.2","children":[{"id":"状态码","title":"状态码","index":"3.2.1"}]}]},{"id":"http首部","title":"HTTP首部","index":"4","children":[{"id":"分类-1","title":"分类","index":"4.1"},{"id":"常见通用首部","title":"常见通用首部","index":"4.2"},{"id":"常用请求首部","title":"常用请求首部","index":"4.3"},{"id":"常见响应首部","title":"常见响应首部","index":"4.4"}]},{"id":"https","title":"HTTPS","index":"5","children":[{"id":"http缺点","title":"HTTP缺点","index":"5.1"},{"id":"ssl","title":"SSL","index":"5.2"},{"id":"加密","title":"加密","index":"5.3","children":[{"id":"对称加密","title":"对称加密","index":"5.3.1"},{"id":"非对称加密","title":"非对称加密","index":"5.3.2"},{"id":"非对称加密--对称加密","title":"非对称加密 + 对称加密","index":"5.3.3"},{"id":"数字证书","title":"数字证书","index":"5.3.4"}]}]},{"id":"参考","title":"参考","index":"6"}]}