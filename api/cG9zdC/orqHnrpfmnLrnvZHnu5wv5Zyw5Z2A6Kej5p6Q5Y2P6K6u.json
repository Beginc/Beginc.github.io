{"title":"地址解析协议","date":"2020-03-13T14:48:34.000Z","date_formatted":{"ll":"Mar 13, 2020","L":"03/13/2020","MM-DD":"03-13"},"thumbnail":"post/计算机网络/地址解析协议/cover.jpg","link":"post/计算机网络/地址解析协议","categories":["计算机网络"],"updated":"2020-03-13T14:53:15.299Z","content":"<h1 id=\"地址解析协议\">地址解析协议<a href=\"#地址解析协议\" title=\"地址解析协议\"></a></h1><p>地址解析协议属于网络层，但是不使用<strong>IP协议</strong>。</p>\n<h2 id=\"arp\">ARP<a href=\"#arp\" title=\"ARP\"></a></h2><p>地址解析协议，由IP地址解析为MAC地址。</p>\n<h2 id=\"rarp\">RARP<a href=\"#rarp\" title=\"RARP\"></a></h2><p>反向地址解析协议，由MAC地址解析为IP地址。</p>\n<ul><li>无盘服务器启动后不知道自己的IP，进行解析</li>\n</ul><h1 id=\"地址解析协议格式\">地址解析协议格式<a href=\"#地址解析协议格式\" title=\"地址解析协议格式\"></a></h1><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313173941013.png\" class=\"\">\n\n<h2 id=\"硬件类型\">硬件类型<a href=\"#硬件类型\" title=\"硬件类型\"></a></h2><p>指出底层网络类型</p>\n<ul><li>1---以太网</li>\n</ul><h2 id=\"协议类型\">协议类型<a href=\"#协议类型\" title=\"协议类型\"></a></h2><p>指出网络层协议类型。</p>\n<ul><li>0x0800---IPv4</li>\n</ul><h2 id=\"操作类型\">操作类型<a href=\"#操作类型\" title=\"操作类型\"></a></h2><ul><li>1：ARP请求</li>\n<li>2：ARP响应</li>\n<li>3：RARP请求</li>\n<li>4：RARP响应</li>\n</ul><h1 id=\"arp-1\">ARP<a href=\"#arp-1\" title=\"ARP\"></a></h1><h2 id=\"用途\">用途<a href=\"#用途\" title=\"用途\"></a></h2><p>链路层通信需要使用MAC地址。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313155001194.png\" class=\"\">\n\n<h2 id=\"过程\">过程<a href=\"#过程\" title=\"过程\"></a></h2><p>假设A想要发送分组给B，则A需要解析B的MAC地址。</p>\n<ol><li>A广播ARP请求<ul><li>因为A不知道B的MAC地址</li>\n<li>此广播为链路层广播，MAC目的地址为全F广播地址</li>\n<li>目的硬件地址全为0</li>\n</ul></li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313175238979.png\" class=\"\">\n\n<ol><li>B单播应答</li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313175512765.png\" class=\"\">\n\n<h2 id=\"arp高速缓存\">ARP高速缓存<a href=\"#arp高速缓存\" title=\"ARP高速缓存\"></a></h2><h3 id=\"存储位置\">存储位置<a href=\"#存储位置\" title=\"存储位置\"></a></h3><p>每台设备都在内存中存储了ARP高速缓存</p>\n<ul><li>重启就没了</li>\n</ul><h3 id=\"自适应arp高速缓存\">自适应ARP高速缓存<a href=\"#自适应arp高速缓存\" title=\"自适应ARP高速缓存\"></a></h3><p>ARP表并不是固定的，而是会在收发数据的过程中，进行添加。</p>\n<p>为了避免每次发送数据包都需要解析MAC地址，所以要设立ARP高速缓存。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313174906364.png\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313174930425.png\" class=\"\">\n\n\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313174647848.png\" class=\"\">\n\n<h1 id=\"rarp-1\">RARP<a href=\"#rarp-1\" title=\"RARP\"></a></h1><p>用于解析本机或者其他主机的IP地址。</p>\n<h2 id=\"用途-1\">用途<a href=\"#用途-1\" title=\"用途\"></a></h2><p>用于无盘计算机启动时，根据自己的MAC地址去解析自己的IP地址。</p>\n<h2 id=\"过程-1\">过程<a href=\"#过程-1\" title=\"过程\"></a></h2><p>假设A想要解析自己的IP地址。</p>\n<ol><li>A广播RARP请求<ul><li>链路层广播</li>\n<li><strong>目的硬件地址写的是待解析的主机的硬件地址</strong></li>\n</ul></li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313175540067.png\" class=\"\">\n\n<ol><li>服务器单播应答</li>\n</ol><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE/image-20200313175635852.png\" class=\"\">","prev":{"title":"链路层","link":"post/计算机网络/链路层"},"next":{"title":"MySQL事务","link":"post/数据库/MySQL/MySQL事务"},"plink":"https://beginc.github.io/post/计算机网络/地址解析协议/","toc":[{"id":"地址解析协议","title":"地址解析协议","index":"1","children":[{"id":"arp","title":"ARP","index":"1.1"},{"id":"rarp","title":"RARP","index":"1.2"}]},{"id":"地址解析协议格式","title":"地址解析协议格式","index":"2","children":[{"id":"硬件类型","title":"硬件类型","index":"2.1"},{"id":"协议类型","title":"协议类型","index":"2.2"},{"id":"操作类型","title":"操作类型","index":"2.3"}]},{"id":"arp-1","title":"ARP","index":"3","children":[{"id":"用途","title":"用途","index":"3.1"},{"id":"过程","title":"过程","index":"3.2"},{"id":"arp高速缓存","title":"ARP高速缓存","index":"3.3","children":[{"id":"存储位置","title":"存储位置","index":"3.3.1"},{"id":"自适应arp高速缓存","title":"自适应ARP高速缓存","index":"3.3.2"}]}]},{"id":"rarp-1","title":"RARP","index":"4","children":[{"id":"用途-1","title":"用途","index":"4.1"},{"id":"过程-1","title":"过程","index":"4.2"}]}]}