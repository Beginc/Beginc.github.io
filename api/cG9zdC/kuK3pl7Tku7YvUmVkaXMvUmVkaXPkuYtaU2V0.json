{"title":"Redis之ZSet","date":"2020-03-01T08:28:11.000Z","date_formatted":{"ll":"Mar 1, 2020","L":"03/01/2020","MM-DD":"03-01"},"thumbnail":"post/中间件/Redis/Redis之ZSet/cover.png","link":"post/中间件/Redis/Redis之ZSet","categories":["Redis","中间件"],"updated":"2020-03-02T01:39:27.882Z","content":"<h1 id=\"常用命令\">常用命令<a href=\"#常用命令\" title=\"常用命令\"></a></h1><p><strong>添加成员</strong></p>\n<ul><li>ZADD key score1 member1 [score2 member2] </li>\n</ul><p><strong>查询成员的分数</strong></p>\n<ul><li>ZSCORE key member</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301214453858.png\" class=\"\">\n\n<p><strong>增加成员的分数</strong></p>\n<ul><li>ZINCRBY key increment member</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301213930459.png\" class=\"\">\n\n<p><strong>查询成员数量</strong></p>\n<ul><li>ZCARD key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301213739689.png\" class=\"\">\n\n<p><strong>查询指定分数区间的成员数量</strong></p>\n<ul><li>ZCOUNT key min max</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301213802999.png\" class=\"\">\n\n<p><strong>从低到高查询指定排行区间内的成员</strong></p>\n<ul><li>ZRANGE key start stop [WITHSCORES]<ul><li>WITHSCORES返回分数</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301214950069.png\" class=\"\">\n\n<p><strong>从高到低查询指定排行区间内的成员</strong></p>\n<ul><li>ZREVRANGE key start stop [WITHSCORES]<ul><li>WITHSCORES返回分数</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301215100238.png\" class=\"\">\n\n<p><strong>从低到高查询指定分数区内的成员</strong></p>\n<ul><li>ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT]<ul><li>LIMIT限制返回数量</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301215319149.png\" class=\"\">\n\n<p><strong>从高到低查询指定分数区内的成员</strong></p>\n<ul><li>ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT]<ul><li>注意是从max到min</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301215408192.png\" class=\"\">\n\n<p><strong>查询指定成员的从低到高的排名</strong></p>\n<ul><li>ZRANK key member</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301215848505.png\" class=\"\">\n\n<p><strong>查询指定成员从高到低的排名</strong></p>\n<ul><li>ZREVRANK key member</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301220002369.png\" class=\"\">\n\n<p><strong>删除成员</strong></p>\n<ul><li>ZREM key member [member]</li>\n</ul><p><strong>删除指定排名区间内的成员</strong></p>\n<ul><li>ZREMRANGEBYRANK key start stop</li>\n</ul><p><strong>删除给定分数区间的成员</strong></p>\n<ul><li>ZREMRANGEBYSCORE key min max</li>\n</ul><p><strong>交集</strong></p>\n<ul><li>ZINTERSTORE destination numkeys key [key] [WEIGHTS weight [weight]] [AGGREGATE SUM|MIN|MAX]<ul><li>destination为结果集合</li>\n<li>numkeys指定参与交集的集合数量</li>\n<li>WEIGHTS指定每个集合的元素权重（聚合之前乘以该权重，默认为1）</li>\n<li>AGGREGATE SUM相同的key其分数求和（默认）</li>\n<li>AGGREGATE MIN相同的key其分数求最小值</li>\n<li>AGGREGATE MIN相同的key其分数求最大值</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BZSet/image-20200301220930660.png\" class=\"\">\n\n<p><strong>并集</strong></p>\n<ul><li>ZUNIONSTORE destination numkeys key [key] [WEIGHTS weight [weight]] [AGGREGATE SUM|MIN|MAX]</li>\n</ul><h1 id=\"应用场景\">应用场景<a href=\"#应用场景\" title=\"应用场景\"></a></h1><h2 id=\"排行榜\">排行榜<a href=\"#排行榜\" title=\"排行榜\"></a></h2>","prev":{"title":"Redis之List","link":"post/中间件/Redis/Redis之List"},"next":{"title":"Redis之Set","link":"post/中间件/Redis/Redis之Set"},"plink":"https://beginc.github.io/post/中间件/Redis/Redis之ZSet/","toc":[{"id":"常用命令","title":"常用命令","index":"1"},{"id":"应用场景","title":"应用场景","index":"2","children":[{"id":"排行榜","title":"排行榜","index":"2.1"}]}]}