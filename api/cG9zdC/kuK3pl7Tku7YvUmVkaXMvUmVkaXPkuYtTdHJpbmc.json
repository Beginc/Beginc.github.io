{"title":"Redis之String","date":"2020-03-01T08:28:00.000Z","date_formatted":{"ll":"Mar 1, 2020","L":"03/01/2020","MM-DD":"03-01"},"thumbnail":"post/中间件/Redis/Redis之String/cover.png","link":"post/中间件/Redis/Redis之String","categories":["Redis","中间件"],"updated":"2020-03-02T10:05:16.332Z","content":"<h1 id=\"常用命令\">常用命令<a href=\"#常用命令\" title=\"常用命令\"></a></h1><h2 id=\"设置\">设置<a href=\"#设置\" title=\"设置\"></a></h2><p><strong>设置单个key</strong></p>\n<ul><li>SET key value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301182916265.png\" class=\"\">\n\n<p><strong>获取值的同时设置值</strong></p>\n<ul><li>GETSET key value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301183230911.png\" class=\"\">\n\n<p><strong>设置多个key</strong></p>\n<ul><li>MSET key value key value...</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301185805999.png\" class=\"\">\n\n<p><strong>设置位</strong></p>\n<ul><li>SETBIT key offset value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301185339375.png\" class=\"\">\n\n<p><strong>当key不存在时设置</strong></p>\n<ul><li>SETNX key [seconds] value<ul><li>seconds为key有效时间</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301185430256.png\" class=\"\">\n\n<ul><li>PSETNX key [milliseconds] value<ul><li>以毫秒为key有效时间</li>\n</ul></li>\n</ul><p><strong>当所有key都不存在时设置多个key</strong></p>\n<ul><li>MSETNX key value key value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190032475.png\" class=\"\">\n\n<img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190057836.png\" class=\"\">\n\n<p><strong>设置位切片</strong></p>\n<ul><li>SETRANGE key offset value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301185617414.png\" class=\"\">\n\n<p><strong>追加字符串</strong></p>\n<ul><li>APPEND key value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190834296.png\" class=\"\">\n\n<h2 id=\"查询\">查询<a href=\"#查询\" title=\"查询\"></a></h2><p><strong>获取单个值</strong></p>\n<ul><li>GET key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301182923023.png\" class=\"\">\n\n<p><strong>获取位切片</strong></p>\n<ul><li>GETRANGE key start end<ul><li>闭区间[start, end]</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301183126470.png\" class=\"\">\n\n<p><strong>获取位</strong></p>\n<ul><li>GETBIT key offset<ul><li>把value转换成ASCII码对应的二进制（<strong>小端对齐</strong>）</li>\n<li>把string当做bitmap使用（把值转换成二进制），获取对应的位</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301183936517.png\" class=\"\">\n\n<img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301184014510.png\" class=\"\">\n\n<p><strong>设置位</strong></p>\n<ul><li>SETBIT key offset</li>\n</ul><p><strong>逻辑操作位</strong></p>\n<ul><li>BITOP op destination key [key]<ul><li>and</li>\n<li>or</li>\n<li>not</li>\n<li>xor</li>\n</ul></li>\n</ul><p><strong>位统计</strong></p>\n<ul><li>BITCOUNT key [start end]<ul><li>统计1的位个数</li>\n</ul></li>\n</ul><p><strong>获取字符串长度</strong></p>\n<ul><li>STRLEN key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301185658545.png\" class=\"\">\n\n<p><strong>获取多个值</strong></p>\n<ul><li>MGET key1 key2...</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301185040411.png\" class=\"\">\n\n<h2 id=\"算术\">算术<a href=\"#算术\" title=\"算术\"></a></h2><p><strong>自增一</strong></p>\n<ul><li>INCR key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190408470.png\" class=\"\">\n\n<img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190424216.png\" class=\"\">\n\n<p><strong>增加指定整数</strong></p>\n<ul><li>INCRBY key increment</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190506014.png\" class=\"\">\n\n<p><strong>增加指定浮点数</strong></p>\n<img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190614720.png\" class=\"\">\n\n<p><strong>自减一</strong></p>\n<ul><li>DECR key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190709450.png\" class=\"\">\n\n<p><strong>自减指定整数</strong></p>\n<ul><li>DECRBY key decrement</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190739651.png\" class=\"\">\n\n<h1 id=\"删除\">删除<a href=\"#删除\" title=\"删除\"></a></h1><ul><li>DEL key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BString/image-20200301190908750.png\" class=\"\">\n\n<h2 id=\"命名规范\">命名规范<a href=\"#命名规范\" title=\"命名规范\"></a></h2><p>表名:主键名:主键值:字段名</p>\n<h1 id=\"使用场景\">使用场景<a href=\"#使用场景\" title=\"使用场景\"></a></h1><h2 id=\"存储高频访问信息\">存储高频访问信息<a href=\"#存储高频访问信息\" title=\"存储高频访问信息\"></a></h2><p><strong>存储微博用户粉丝数目</strong></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> user:id:35357:fans 10000</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"分布式锁\">分布式锁<a href=\"#分布式锁\" title=\"分布式锁\"></a></h2><ul><li>SETNX</li>\n</ul>","prev":{"title":"Redis之Hash","link":"post/中间件/Redis/Redis之Hash"},"next":{"title":"JVM之内存结构","link":"post/Java/JVM/JVM之内存结构"},"plink":"https://beginc.github.io/post/中间件/Redis/Redis之String/","toc":[{"id":"常用命令","title":"常用命令","index":"1","children":[{"id":"设置","title":"设置","index":"1.1"},{"id":"查询","title":"查询","index":"1.2"},{"id":"算术","title":"算术","index":"1.3"}]},{"id":"删除","title":"删除","index":"2","children":[{"id":"命名规范","title":"命名规范","index":"2.1"}]},{"id":"使用场景","title":"使用场景","index":"3","children":[{"id":"存储高频访问信息","title":"存储高频访问信息","index":"3.1"},{"id":"分布式锁","title":"分布式锁","index":"3.2"}]}]}