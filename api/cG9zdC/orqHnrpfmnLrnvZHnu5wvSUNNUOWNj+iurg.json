{"title":"ICMP协议","date":"2020-03-13T14:51:07.000Z","date_formatted":{"ll":"Mar 13, 2020","L":"03/13/2020","MM-DD":"03-13"},"thumbnail":"post/计算机网络/ICMP协议/cover.jpg","link":"post/计算机网络/ICMP协议","categories":["计算机网络"],"updated":"2020-03-13T14:53:15.299Z","content":"<h1 id=\"icmp\">ICMP<a href=\"#icmp\" title=\"ICMP\"></a></h1><p>位于网络层，使用IP协议进行封装。</p>\n<h2 id=\"用途\">用途<a href=\"#用途\" title=\"用途\"></a></h2><ul><li>IP传输差错报告</li>\n<li>IP传输拥塞控制</li>\n<li>IP传输路径控制</li>\n<li>IP传输时间信息获取</li>\n<li>IP传输掩码信息获取</li>\n</ul><h2 id=\"协议格式\">协议格式<a href=\"#协议格式\" title=\"协议格式\"></a></h2><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICMP%E5%8D%8F%E8%AE%AE/image-20200313175952788.png\" class=\"\">\n\n<h3 id=\"类型\">类型<a href=\"#类型\" title=\"类型\"></a></h3><p>指示是哪一种控制报文。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICMP%E5%8D%8F%E8%AE%AE/image-20200313181113416.png\" class=\"\">\n\n<div class=\"cz\"><div class=\"db\"><table><thead><tr>\n<th>类型号</th><th>类型</th></tr>\n</thead><tbody><tr>\n<td>3</td><td>信宿不可达报告</td></tr>\n<tr>\n<td>4</td><td>拥塞控制</td></tr>\n<tr>\n<td>5</td><td>路径控制</td></tr>\n<tr>\n<td>8和0</td><td>回答请求与响应</td></tr>\n<tr>\n<td>11</td><td>数据报超时报告</td></tr>\n<tr>\n<td>12</td><td>数据报参数错误报告</td></tr>\n</tbody></table></div></div><h3 id=\"代码\">代码<a href=\"#代码\" title=\"代码\"></a></h3><p>对控制报文的进一步细分。</p>\n<h2 id=\"icmp差错报告报文\">ICMP差错报告报文<a href=\"#icmp差错报告报文\" title=\"ICMP差错报告报文\"></a></h2><ul><li>丢弃出错的IP数据报</li>\n<li>向信源机报告差错</li>\n<li>数据区包含出错IP数据报的首部和前64比特的数据</li>\n</ul><p><strong>不产生ICMP差错报告的情况</strong></p>\n<ul><li>非第一个IP分片出错</li>\n<li>ICMP差错报告报文出错</li>\n<li>组播IP数据报出错</li>\n<li>本地环回IP数据报出错</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/ICMP%E5%8D%8F%E8%AE%AE/image-20200313181550044.png\" class=\"\">\n\n<h2 id=\"icmp控制报文\">ICMP控制报文<a href=\"#icmp控制报文\" title=\"ICMP控制报文\"></a></h2><h3 id=\"源抑制报文\">源抑制报文<a href=\"#源抑制报文\" title=\"源抑制报文\"></a></h3><p>用于拥塞控制。</p>\n<p><strong>步骤</strong></p>\n<ol><li>发现拥塞：路由器或者信宿机缓冲区溢出时发送ICMP源抑制报文</li>\n<li>解决拥塞：信源机降低发送速率直到不再收到更多的源抑制报文</li>\n<li>恢复：信源机一段时间未收到源抑制报文，则逐渐恢复发送速率</li>\n</ol><h3 id=\"重定向报文\">重定向报文<a href=\"#重定向报文\" title=\"重定向报文\"></a></h3><p>用于路径控制。</p>\n<ul><li>主机的路由表</li>\n</ul>","prev":{"title":"二叉树的非递归遍历","link":"post/数据结构与算法/二叉树的非递归遍历"},"next":{"title":"UDP协议","link":"post/计算机网络/UDP协议"},"plink":"https://beginc.github.io/post/计算机网络/ICMP协议/","toc":[{"id":"icmp","title":"ICMP","index":"1","children":[{"id":"用途","title":"用途","index":"1.1"},{"id":"协议格式","title":"协议格式","index":"1.2","children":[{"id":"类型","title":"类型","index":"1.2.1"},{"id":"代码","title":"代码","index":"1.2.2"}]},{"id":"icmp差错报告报文","title":"ICMP差错报告报文","index":"1.3"},{"id":"icmp控制报文","title":"ICMP控制报文","index":"1.4","children":[{"id":"源抑制报文","title":"源抑制报文","index":"1.4.1"},{"id":"重定向报文","title":"重定向报文","index":"1.4.2"}]}]}]}