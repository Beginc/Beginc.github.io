{"title":"Redis之List","date":"2020-03-01T08:28:29.000Z","date_formatted":{"ll":"Mar 1, 2020","L":"03/01/2020","MM-DD":"03-01"},"thumbnail":"post/中间件/Redis/Redis之List/cover.png","link":"post/中间件/Redis/Redis之List","categories":["Redis","中间件"],"updated":"2020-03-02T01:39:27.882Z","content":"<h1 id=\"前言\">前言<a href=\"#前言\" title=\"前言\"></a></h1><p>在List的各种命令中</p>\n<ul><li>带L前缀：操作List第一个元素</li>\n<li>带R前缀：操作List最后一个元素</li>\n</ul><h1 id=\"常用命令\">常用命令<a href=\"#常用命令\" title=\"常用命令\"></a></h1><p><strong>阻塞移除并获取表头</strong></p>\n<ul><li>BLPOP key1 [key2] timeout<ul><li>timeout为超时时间</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301191807288.png\" class=\"\">\n\n<p><strong>阻塞移除并获取表尾</strong></p>\n<ul><li>BRPOP key [key2] timeout</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301191953263.png\" class=\"\">\n\n<p><strong>阻塞从一个表尾取出放入另一个表头</strong></p>\n<ul><li>BRPOPLPUSH source destination timeout</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301192215212.png\" class=\"\">\n\n<p><strong>移除并获取表头</strong></p>\n<ul><li>LPOP key1 [key2]</li>\n</ul><p><strong>移除并获取表尾</strong></p>\n<ul><li>RPOP key [key2]</li>\n</ul><p><strong>从一个表尾取出放入另一个表头</strong></p>\n<ul><li>RPOPLPUSH source destination</li>\n</ul><p><strong>通过索引获取列表元素</strong></p>\n<ul><li>LINDEX key index</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301192259325.png\" class=\"\">\n\n<p><strong>在列表元素前或元素后插入元素</strong></p>\n<ul><li>LINSERT key BEFORE|AFTER pivot value<ul><li>pivot是值而不是索引</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301192648544.png\" class=\"\">\n\n<p><strong>获取列表长度</strong></p>\n<ul><li>LLEN key</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193004426.png\" class=\"\">\n\n<p><strong>列表存在时插入值到头部</strong></p>\n<ul><li>LPUSHX key value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193216062.png\" class=\"\">\n\n<p><strong>列表存在时插入到表尾</strong></p>\n<ul><li>RPUSHX key value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193813492.png\" class=\"\">\n\n<img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193834270.png\" class=\"\">\n\n<p><strong>获取列表切片</strong></p>\n<ul><li>LRANGE key start stop<ul><li>闭区间[start, stop]</li>\n<li>stop为-1可取到最后</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193317869.png\" class=\"\">\n\n<p><strong>移除指定元素</strong></p>\n<ul><li>LREM key count value<ul><li>count移除多少个</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193448115.png\" class=\"\">\n\n<p><strong>通过索引设置元素值</strong></p>\n<ul><li>LSET key index value</li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193536892.png\" class=\"\">\n\n<p><strong>保留区间内元素</strong></p>\n<ul><li>LTRIM key start stop<ul><li>只保留[start, stop]的元素</li>\n</ul></li>\n</ul><img src=\"/post/%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%B9%8BList/image-20200301193646693.png\" class=\"\">\n\n<h1 id=\"使用场景\">使用场景<a href=\"#使用场景\" title=\"使用场景\"></a></h1><h2 id=\"顺序展示\">顺序展示<a href=\"#顺序展示\" title=\"顺序展示\"></a></h2><p><strong>微博粉丝列表按关注顺序展示</strong></p>\n","prev":{"title":"Redis之HyperLogLog","link":"post/中间件/Redis/Redis之HyperLogLog"},"next":{"title":"Redis之ZSet","link":"post/中间件/Redis/Redis之ZSet"},"plink":"https://beginc.github.io/post/中间件/Redis/Redis之List/","toc":[{"id":"前言","title":"前言","index":"1"},{"id":"常用命令","title":"常用命令","index":"2"},{"id":"使用场景","title":"使用场景","index":"3","children":[{"id":"顺序展示","title":"顺序展示","index":"3.1"}]}]}