{"title":"链路层","date":"2020-03-13T14:48:48.000Z","date_formatted":{"ll":"Mar 13, 2020","L":"03/13/2020","MM-DD":"03-13"},"thumbnail":"post/计算机网络/链路层/cover.jpg","link":"post/计算机网络/链路层","categories":["计算机网络"],"updated":"2020-03-16T15:37:18.820Z","content":"<h1 id=\"链路层功能\">链路层功能<a href=\"#链路层功能\" title=\"链路层功能\"></a></h1><p>加强物理层传输原始比特流的能力，将其改造成逻辑上无差错的数据链路。</p>\n<p><strong>为网络层提供服务</strong></p>\n<ul><li>无确认无连接</li>\n<li>有确认无连接</li>\n<li>有确认有连接</li>\n</ul><p><strong>链路管理</strong></p>\n<p><strong>组帧</strong></p>\n<p><strong>流量控制</strong></p>\n<ul><li>点到点的流量控制</li>\n<li>收不下就不回复确认</li>\n</ul><p><strong>差错控制</strong></p>\n<ul><li>点到点的差错控制</li>\n<li>奇偶校验/CRC/海明码</li>\n</ul><h1 id=\"差错控制\">差错控制<a href=\"#差错控制\" title=\"差错控制\"></a></h1><h2 id=\"奇偶校验\">奇偶校验<a href=\"#奇偶校验\" title=\"奇偶校验\"></a></h2><p>TODO</p>\n<h2 id=\"海明码\">海明码<a href=\"#海明码\" title=\"海明码\"></a></h2><p>TODO</p>\n<h2 id=\"crc\">CRC<a href=\"#crc\" title=\"CRC\"></a></h2><p>TODO</p>\n<h1 id=\"组帧\">组帧<a href=\"#组帧\" title=\"组帧\"></a></h1><h2 id=\"组帧的作用\">组帧的作用<a href=\"#组帧的作用\" title=\"组帧的作用\"></a></h2><ul><li>添加控制信息</li>\n<li>帧定界（方便拆包）</li>\n</ul><h2 id=\"组帧方法\">组帧方法<a href=\"#组帧方法\" title=\"组帧方法\"></a></h2><h3 id=\"字符计数法\">字符计数法<a href=\"#字符计数法\" title=\"字符计数法\"></a></h3><p>在每个帧的首部填充上本帧的长度。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313144121915.png\" class=\"\">\n\n<p><strong>缺点</strong></p>\n<ul><li>鲁棒性低<ul><li>若字符计数传输出错，则全部会发生错乱</li>\n</ul></li>\n</ul><h3 id=\"字符填充法\">字符填充法<a href=\"#字符填充法\" title=\"字符填充法\"></a></h3><ul><li>在头部填充开始标记</li>\n<li>在尾部填充结束标记</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313144234059.png\" class=\"\"> \n\n<p><strong>缺点</strong></p>\n<ul><li>开始和结束标记不能出现在数据部分<ul><li>只能传输固定编码的数据，不能传输任意二进制流</li>\n</ul></li>\n</ul><h3 id=\"字符填充法--转义\">字符填充法 + 转义<a href=\"#字符填充法--转义\" title=\"字符填充法 + 转义\"></a></h3><p>在字符填充法的基础上，为数据部分出现的开始和结束标记添加上转义符号。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313144405087.png\" class=\"\">\n\n\n\n<h3 id=\"零比特填充法\">零比特填充法<a href=\"#零比特填充法\" title=\"零比特填充法\"></a></h3><ul><li>开头填充01111110</li>\n<li>结尾填充01111110</li>\n<li>数据部分5110<ul><li>碰到5个连续的1就在后面填充一个0</li>\n</ul></li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313144525997.png\" class=\"\">\n\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313144628374.png\" class=\"\">\n\n<p><strong>优点</strong></p>\n<ul><li>实现了字节流的透明传输</li>\n</ul><h1 id=\"链路管理\">链路管理<a href=\"#链路管理\" title=\"链路管理\"></a></h1><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313144814447.png\" class=\"\">\n\n<h2 id=\"信道划分介质访问控制\">信道划分介质访问控制<a href=\"#信道划分介质访问控制\" title=\"信道划分介质访问控制\"></a></h2><h3 id=\"频分多路复用\">频分多路复用<a href=\"#频分多路复用\" title=\"频分多路复用\"></a></h3><ul><li>不同的用户分配使用不同的传输频率</li>\n</ul><h3 id=\"时分多路复用\">时分多路复用<a href=\"#时分多路复用\" title=\"时分多路复用\"></a></h3><ul><li>不同的用户分配使用不同的时间</li>\n</ul><h3 id=\"波分多路复用\">波分多路复用<a href=\"#波分多路复用\" title=\"波分多路复用\"></a></h3><ul><li>即光的频分多路复用</li>\n<li>在光纤中不同的用户传输不同波长的光信号</li>\n</ul><h3 id=\"码分多路复用\">码分多路复用<a href=\"#码分多路复用\" title=\"码分多路复用\"></a></h3><p>TODO</p>\n<h2 id=\"轮询访问介质访问控制\">轮询访问介质访问控制<a href=\"#轮询访问介质访问控制\" title=\"轮询访问介质访问控制\"></a></h2><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313145228506.png\" class=\"\">\n\n<h3 id=\"令牌\">令牌<a href=\"#令牌\" title=\"令牌\"></a></h3><ul><li>一个特殊格式的MAC控制帧</li>\n<li>不带任何数据</li>\n<li>同一时刻只有一个人持有令牌</li>\n<li>拿到令牌的人可以发送数据</li>\n</ul><h2 id=\"随机访问介质访问控制\">随机访问介质访问控制<a href=\"#随机访问介质访问控制\" title=\"随机访问介质访问控制\"></a></h2><h3 id=\"aloha\">ALOHA<a href=\"#aloha\" title=\"ALOHA\"></a></h3><p><strong>内容</strong></p>\n<ul><li>想发就发</li>\n<li>发生冲突后等待一个随机时间后进行重发</li>\n</ul><p><strong>冲突检测</strong></p>\n<ul><li>接收方收到差错的帧直接不回复</li>\n<li>发送方超时重发</li>\n</ul><h3 id=\"csma\">CSMA<a href=\"#csma\" title=\"CSMA\"></a></h3><p>载波监听多路访问控制协议。</p>\n<p><strong>内容</strong></p>\n<ul><li>发送之前先监听信道是否忙<ul><li>1坚持：<ul><li>忙：持续监听，闲则马上传输</li>\n<li>闲：马上传输</li>\n</ul></li>\n<li>非坚持<ul><li>忙：等待一个随机时间后再监听</li>\n<li>闲：马上传输</li>\n</ul></li>\n<li>P坚持<ul><li>忙：等待一个随机时间后再监听</li>\n<li>闲：以概率P直接传输，1-P概率等待一个时间槽再传输</li>\n</ul></li>\n</ul></li>\n<li>发生冲突：坚持发送完</li>\n</ul><h3 id=\"csmacd\">CSMA/CD<a href=\"#csmacd\" title=\"CSMA/CD\"></a></h3><p><strong>适用</strong></p>\n<ul><li>总线型网络</li>\n</ul><p><strong>内容</strong></p>\n<ul><li>边发送边监听，冲突后以截断二进制指数规避算法决定重传时机</li>\n</ul><h3 id=\"csmaca\">CSMA/CA<a href=\"#csmaca\" title=\"CSMA/CA\"></a></h3><p><strong>适用</strong></p>\n<ul><li>无线网络</li>\n</ul><p><strong>内容</strong></p>\n<ul><li>发送前先监听，若空闲则发送一个RTS(Request To Send)帧<ul><li>源地址</li>\n<li>目的地址</li>\n<li>预计持续发送时间</li>\n</ul></li>\n<li>接收端收到RTS帧后响应CTS(Clear To Send)帧，同时预约信道</li>\n<li>接收端正确收到数据时响应ACK帧</li>\n</ul><h1 id=\"流量控制与可靠传输\">流量控制与可靠传输<a href=\"#流量控制与可靠传输\" title=\"流量控制与可靠传输\"></a></h1><h2 id=\"停等协议\">停等协议<a href=\"#停等协议\" title=\"停等协议\"></a></h2><p>使用一个比特对帧进行编号</p>\n<ul><li>0号帧</li>\n<li>1号帧</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313151917426.png\" class=\"\">\n\n<p><strong>发送方</strong></p>\n<ul><li>交替发送0帧和1帧</li>\n<li>收到确认帧后才发送下一个帧</li>\n<li>长时间未收到确认帧则超时重发</li>\n</ul><p><strong>接收方</strong></p>\n<ul><li>交替接收0帧和1帧</li>\n<li>收到想要的帧后才发送确认帧</li>\n</ul><p><strong>帧丢失</strong></p>\n<ul><li>发送方超时重发</li>\n</ul><p><strong>帧出错</strong></p>\n<ul><li>接受方不发送确认</li>\n</ul><p><strong>ACK帧丢失</strong></p>\n<ul><li>发送方超时重发</li>\n<li>接收方丢弃重复的帧，再次发送确认ACK帧</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313152630770.png\" class=\"\">\n\n<p><strong>ACK帧迟到</strong></p>\n<ul><li><p>发送方超时重传</p>\n</li>\n<li><p>发送方丢弃不符合编号的ACK帧</p>\n</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313152740554.png\" class=\"\">\n\n<h2 id=\"gbn协议\">GBN协议<a href=\"#gbn协议\" title=\"GBN协议\"></a></h2><p>TODO</p>\n<h2 id=\"sr协议\">SR协议<a href=\"#sr协议\" title=\"SR协议\"></a></h2><p>TODO</p>\n<h1 id=\"链路层设备\">链路层设备<a href=\"#链路层设备\" title=\"链路层设备\"></a></h1><h2 id=\"集线器\">集线器<a href=\"#集线器\" title=\"集线器\"></a></h2><p>连接多个设备，收到帧后向所有出口转发。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313153133207.png\" class=\"\">\n\n<h2 id=\"网桥\">网桥<a href=\"#网桥\" title=\"网桥\"></a></h2><p>对以太网进行扩展。<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313153346166.png\" class=\"\"></p>\n<p><strong>功能</strong></p>\n<ul><li>根据MAC帧的目的地址进行转发和过滤，而不是广播</li>\n</ul><p><strong>优点</strong></p>\n<ul><li>隔离冲突域</li>\n<li>扩大局域网范围</li>\n<li>提高可靠性<ul><li>互联不同实现的以太网</li>\n</ul></li>\n</ul><h3 id=\"透明网桥\">透明网桥<a href=\"#透明网桥\" title=\"透明网桥\"></a></h3><ul><li>和ARP高速缓存一样学习转发表。</li>\n<li>查转发表无记录时进行广播</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313153356449.png\" class=\"\">\n\n<h3 id=\"源路由网桥\">源路由网桥<a href=\"#源路由网桥\" title=\"源路由网桥\"></a></h3><p>可将最好的路由信息放在帧的首部。</p>\n<p>TODO</p>\n<h2 id=\"交换机\">交换机<a href=\"#交换机\" title=\"交换机\"></a></h2><p> 扩展以太网。多接口网桥。</p>\n<img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313153615721.png\" class=\"\">\n\n<h3 id=\"直通式交换机\">直通式交换机<a href=\"#直通式交换机\" title=\"直通式交换机\"></a></h3><p>查表后立刻转发。</p>\n<ul><li>不查错</li>\n<li>不缓存</li>\n</ul><h3 id=\"存储转发式交换机\">存储转发式交换机<a href=\"#存储转发式交换机\" title=\"存储转发式交换机\"></a></h3><ul><li>将帧放入高速缓存</li>\n<li>查错后进转发</li>\n<li>支持速率转换</li>\n</ul><h1 id=\"以太网\">以太网<a href=\"#以太网\" title=\"以太网\"></a></h1><h2 id=\"以太网提供的服务\">以太网提供的服务<a href=\"#以太网提供的服务\" title=\"以太网提供的服务\"></a></h2><ul><li>无连接</li>\n<li>不可靠<ul><li>帧不带编号</li>\n<li>不发送确认帧，出错直接丢弃</li>\n</ul></li>\n</ul><h2 id=\"信道访问控制协议\">信道访问控制协议<a href=\"#信道访问控制协议\" title=\"信道访问控制协议\"></a></h2><ul><li>CSMA/CD</li>\n</ul><h2 id=\"以太网帧格式\">以太网帧格式<a href=\"#以太网帧格式\" title=\"以太网帧格式\"></a></h2><ul><li>目的地址：MAC<ul><li>单播地址</li>\n<li>广播地址: 全F</li>\n<li>多播地址</li>\n</ul></li>\n<li>源地址：MAC</li>\n<li>类型：网络层协议</li>\n<li>FCS：CRC</li>\n</ul><img src=\"/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82/image-20200313155001194.png\" class=\"\">","prev":{"title":"路由协议","link":"post/计算机网络/路由协议"},"next":{"title":"地址解析协议","link":"post/计算机网络/地址解析协议"},"plink":"https://beginc.github.io/post/计算机网络/链路层/","toc":[{"id":"链路层功能","title":"链路层功能","index":"1"},{"id":"差错控制","title":"差错控制","index":"2","children":[{"id":"奇偶校验","title":"奇偶校验","index":"2.1"},{"id":"海明码","title":"海明码","index":"2.2"},{"id":"crc","title":"CRC","index":"2.3"}]},{"id":"组帧","title":"组帧","index":"3","children":[{"id":"组帧的作用","title":"组帧的作用","index":"3.1"},{"id":"组帧方法","title":"组帧方法","index":"3.2","children":[{"id":"字符计数法","title":"字符计数法","index":"3.2.1"},{"id":"字符填充法","title":"字符填充法","index":"3.2.2"},{"id":"字符填充法--转义","title":"字符填充法 + 转义","index":"3.2.3"},{"id":"零比特填充法","title":"零比特填充法","index":"3.2.4"}]}]},{"id":"链路管理","title":"链路管理","index":"4","children":[{"id":"信道划分介质访问控制","title":"信道划分介质访问控制","index":"4.1","children":[{"id":"频分多路复用","title":"频分多路复用","index":"4.1.1"},{"id":"时分多路复用","title":"时分多路复用","index":"4.1.2"},{"id":"波分多路复用","title":"波分多路复用","index":"4.1.3"},{"id":"码分多路复用","title":"码分多路复用","index":"4.1.4"}]},{"id":"轮询访问介质访问控制","title":"轮询访问介质访问控制","index":"4.2","children":[{"id":"令牌","title":"令牌","index":"4.2.1"}]},{"id":"随机访问介质访问控制","title":"随机访问介质访问控制","index":"4.3","children":[{"id":"aloha","title":"ALOHA","index":"4.3.1"},{"id":"csma","title":"CSMA","index":"4.3.2"},{"id":"csmacd","title":"CSMA&#x2F;CD","index":"4.3.3"},{"id":"csmaca","title":"CSMA&#x2F;CA","index":"4.3.4"}]}]},{"id":"流量控制与可靠传输","title":"流量控制与可靠传输","index":"5","children":[{"id":"停等协议","title":"停等协议","index":"5.1"},{"id":"gbn协议","title":"GBN协议","index":"5.2"},{"id":"sr协议","title":"SR协议","index":"5.3"}]},{"id":"链路层设备","title":"链路层设备","index":"6","children":[{"id":"集线器","title":"集线器","index":"6.1"},{"id":"网桥","title":"网桥","index":"6.2","children":[{"id":"透明网桥","title":"透明网桥","index":"6.2.1"},{"id":"源路由网桥","title":"源路由网桥","index":"6.2.2"}]},{"id":"交换机","title":"交换机","index":"6.3","children":[{"id":"直通式交换机","title":"直通式交换机","index":"6.3.1"},{"id":"存储转发式交换机","title":"存储转发式交换机","index":"6.3.2"}]}]},{"id":"以太网","title":"以太网","index":"7","children":[{"id":"以太网提供的服务","title":"以太网提供的服务","index":"7.1"},{"id":"信道访问控制协议","title":"信道访问控制协议","index":"7.2"},{"id":"以太网帧格式","title":"以太网帧格式","index":"7.3"}]}]}