[{"title":"Java集合","date":"2019-09-07T14:57:07.000Z","updated":"2019-09-07T15:50:15.570Z","content":"Java集合体系简介Collection接口所有集合类的根接口。\nList接口一种有序列表的集合。\nSet接口一种保证没有重复元素的集合。\nMap接口一种通过键值查找的映射表集合。\nIteratorJava统一访问集合的方式。\nList创建List.of(...)\n1234List&lt;Integer&gt; list = List.of(1, 2, 3, 4);for (Integer item : list) &#123;    System.out.println(item);&#125;\n\n访问void add(E e)在末尾添加一个元素：void add(int index, E e)在指定索引添加一个元素int remove(int index)删除指定索引的元素int remove(Object e)删除某个元素E get(int index)获取指定索引的元素int size()获取链表大小（包含元素的个数）\n12345678910111213141516171819202122232425262728List&lt;String&gt; list = new ArrayList&lt;&gt;();list.add(\"1\");list.add(\"2\");// 1// 2for (String item : list) &#123;    System.out.println(item);&#125;list.remove(0);// 2for (String item : list) &#123;    System.out.println(item);&#125;// 2System.out.println(list.get(0));list.add(\"Hello\");// HelloSystem.out.println(list.get(1));list.remove(\"Hello\");// 2for (String item : list) &#123;    System.out.println(item);&#125;// 1System.out.println(list.size());\n\n与数组的相互转换\n\nObject[] toArray()缺点是丢失了类型信息\n\n1Object[] array = list.toArray();\n\n\nObject[] toArray(T[])传入一个类型相同的数组，List内部自动把元素复制到传入的Array中。\n\n\n如果传入的数组不够大，那么List内部会创建一个新的刚好够大的数组，填充后返回。\n如果传入的数组比List元素还要多，那么填充完元素后，剩下的数组元素一律填充null。\n\n1Integer[] array = list.toArray(new Integer[4]);\n\n实现类ArrayList底层实现为数组。\nLinkedList底层实现为链表。\n","thumbnail":"/post/Java集合/cover.jpg","plink":"https://beginc.github.io/post/Java集合/"},{"title":"Pipeline框架设计---Registry","date":"2019-09-06T03:36:45.000Z","updated":"2019-09-07T15:50:23.583Z","content":"设计目的要使得框架能够实现全配置文件化，必须提供某种机制，使得我们能够实例化任何在配置文件中所指定的类，并传递配置文件中的相关参数。\nmmdet的实现Registry类实现一个注册工厂类，用来存储和检索注册的类\n12345678910111213141516171819202122232425262728293031323334353637383940class Registry(object):    def __init__(self, name):        self._name = name        self._module_dict = dict()    def __repr__(self):        format_str = self.__class__.__name__ + '(name=&#123;&#125;, items=&#123;&#125;)'.format(            self._name, list(self._module_dict.keys()))        return format_str    @property    def name(self):        return self._name    @property    def module_dict(self):        return self._module_dict    def get(self, key):        return self._module_dict.get(key, None)    def _register_module(self, module_class):        \"\"\"Register a module.        Args:            module (:obj:`nn.Module`): Module to be registered.        \"\"\"        if not inspect.isclass(module_class):            raise TypeError('module must be a class, but got &#123;&#125;'.format(                type(module_class)))        module_name = module_class.__name__        if module_name in self._module_dict:            raise KeyError('&#123;&#125; is already registered in &#123;&#125;'.format(                module_name, self.name))        self._module_dict[module_name] = module_class    def register_module(self, cls):        self._register_module(cls)        return cls\n\n实例化工厂为每个类别的模块实例化一个注册工厂\n123456789from mmdet.utils import RegistryBACKBONES = Registry('backbone')NECKS = Registry('neck')ROI_EXTRACTORS = Registry('roi_extractor')SHARED_HEADS = Registry('shared_head')HEADS = Registry('head')LOSSES = Registry('loss')DETECTORS = Registry('detector')\n\n注册使用注解的形式进行注册\n123@DETECTORS.register_moduleclass SingleStageDetector(BaseDetector):    ...\n\nPipeline框架Registry设计Registry\n使用全称限定名进行注册\n在检索的时候才进行模块的导入(lazy-import)\n\n12345678910111213141516171819202122232425262728293031from importlib import import_moduleclass Registry():    def __init__(self):        self._catelog = dict()    def register(self, name, fullname):        assert name not in self._catelog        self._catelog[name] = fullname    def register_package(self, package, *modules):        for module in modules:            self.register(module, package + '.' + module)    def get(self, name):        assert name in self._catelog, \"&#123;&#125; hasn't been registered yet!\".format(            name)        fullname = self._catelog[name]        path = fullname.split(\".\")        module_name = \".\".join(path[:-1])        cls_name = path[-1]        module = import_module(module_name)        cls = getattr(module, cls_name)        return cls    @property    def catelog(self):        return self._catelog\n\n注册1234567891011REGISTRY = Registry()# TransformREGISTRY.register_package('mxnet.gluon.data.vision.transforms',                          'ToTensor', 'Normalize', 'RandomResizedCrop',                          'CenterCrop', 'Resize', 'RandomFlipLeftRight',                          'RandomColorJitter', 'RandomLighting')# DatasetREGISTRY.register_package('mxnet.gluon.data.vision', 'CIFAR10', 'MNIST')# ModelREGISTRY.register_package('pipeline.model.resnet', 'ResNetV1', 'ResNetV2')\n\n实现用配置文件实例化类\ncfg中需包含type字段指明类名（需要注册过）\ncfg中可嵌套包含其他类（builder进行递归实例化）\n\n12345model_config = dict(    type='ResNetV1',    num_layers=18,    classes=10)\n\nbuilder\n12345678910111213from .registry import REGISTRYdef build(cfg):    if isinstance(cfg, dict) and \"type\" in cfg:        name = cfg.get(\"type\")        cls = REGISTRY.get(name)        params = &#123;&#125;        for key, val in cfg.items():            if key != 'type':                params[key] = build(val)        return cls(**params)    return cfg","thumbnail":"/post/Pipeline框架设计-Registry/cover.jpg","plink":"https://beginc.github.io/post/Pipeline框架设计-Registry/"},{"title":"SSM整合","date":"2019-09-06T02:57:06.000Z","updated":"2019-09-07T15:50:30.325Z","content":"创建Maven项目\npackaging为war\n\n编译设置1234567891011121314151617&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;packaging&gt;war&lt;/packaging&gt;    &lt;groupId&gt;cn.edu.njust&lt;/groupId&gt;    &lt;artifactId&gt;Reading&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;properties&gt;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;    &lt;/properties&gt;&lt;/project&gt;\n\n配置maven-tomcat7-plugin插件1234567891011121314151617181920212223242526272829&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;packaging&gt;war&lt;/packaging&gt;    &lt;groupId&gt;cn.edu.njust&lt;/groupId&gt;    &lt;artifactId&gt;Reading&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;properties&gt;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;    &lt;/properties&gt;        &lt;build&gt;        &lt;plugins&gt;            &lt;plugin&gt;                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;                &lt;version&gt;2.1&lt;/version&gt;                &lt;configuration&gt;                    &lt;contextReloadable&gt;true&lt;/contextReloadable&gt;                &lt;/configuration&gt;            &lt;/plugin&gt;        &lt;/plugins&gt;    &lt;/build&gt;&lt;/project&gt;\n\n引入依赖Servlet + JSP + JSTL\nscope设置为provided（因为在tomcat容器中有依赖，不设置为provided会发生冲突）\n\n123456789101112131415161718&lt;dependency&gt;    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;    &lt;version&gt;4.0.1&lt;/version&gt;    &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;    &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;    &lt;version&gt;2.3.3&lt;/version&gt;    &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;    &lt;artifactId&gt;jstl&lt;/artifactId&gt;    &lt;version&gt;1.2&lt;/version&gt;    &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;\n\nMyBatis\nMyBatis + MySQL\n\n12345678910&lt;dependency&gt;    &lt;groupId&gt;mysql&lt;/groupId&gt;    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;    &lt;version&gt;8.0.17&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;    &lt;version&gt;3.2.7&lt;/version&gt;&lt;/dependency&gt;\n\nSpring整合MyBatis12345&lt;dependency&gt;    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;    &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;    &lt;version&gt;1.2.2&lt;/version&gt;&lt;/dependency&gt;\n\nSpringMVC\nspring-webmvc已经包含Spring的四个核心包以及spring-web\nspring-context\nspring-bean\nspring-core\nspring-expression\nspring-web\n\n\n\n12345&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;    &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;\n\nSpring AOP\nspring-aop + spring-aspects\n\n12345678910&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;    &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;    &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;\n\nSpring事务管理12345678910&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;    &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;    &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;\n\nSpring测试\nspring-test + junit\n\n12345678910&lt;dependency&gt;    &lt;groupId&gt;junit&lt;/groupId&gt;    &lt;artifactId&gt;junit&lt;/artifactId&gt;    &lt;version&gt;4.10&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;    &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;\n\n配置文件mybatis.xml\n别名\nmapper文件\n\n1234567891011121314&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"        \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;        &lt;typeAliases&gt;        &lt;package name=\"cn.edu.njust.bean\"/&gt;    &lt;/typeAliases&gt;    &lt;mappers&gt;    &lt;/mappers&gt;&lt;/configuration&gt;\n\nspring-context.xml\n开启包扫描\n加载jdbc配置文件\n配置数据源dataSource\n配置sqlSessionFactory\n配置mybatis动态代理\n配置事务\n\n1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xmlns:aop=\"http://www.springframework.org/schema/aop\"       xmlns:tx=\"http://www.springframework.org/schema/tx\"       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context        http://www.springframework.org/schema/context/spring-context.xsd        http://www.springframework.org/schema/aop        http://www.springframework.org/schema/aop/spring-aop.xsd        http://www.springframework.org/schema/tx        http://www.springframework.org/schema/tx/spring-tx.xsd        http://www.springframework.org/schema/mvc        http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt;    &lt;context:component-scan base-package=\"cn.edu.njust.service\"/&gt;    &lt;context:property-placeholder location=\"classpath:jdbc.properties\"/&gt;    &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;        &lt;property name=\"driverClassName\" value=\"$&#123;jdbc.driver&#125;\"/&gt;        &lt;property name=\"url\" value=\"$&#123;jdbc.url&#125;\"/&gt;        &lt;property name=\"username\" value=\"$&#123;jdbc.username&#125;\"/&gt;        &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\"/&gt;    &lt;/bean&gt;    &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;        &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;        &lt;property name=\"configLocation\" value=\"classpath:mybatis.xml\"/&gt;    &lt;/bean&gt;    &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;        &lt;property name=\"basePackage\" value=\"cn.edu.njust.mapper\" /&gt;    &lt;/bean&gt;    &lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;        &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;    &lt;/bean&gt;    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;&lt;/beans&gt;\n\nspring-mvc.xml\n开启包扫描\n开启注解驱动(自动配置HandlerMapping和HandlerAdapter)\n静态资源交给default-servlet-handler\n\n12345678910111213141516&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"       xmlns:context=\"http://www.springframework.org/schema/context\"       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"       xsi:schemaLocation=\"http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context.xsd \"&gt;    &lt;context:component-scan base-package=\"cn.edu.njust.controller\"/&gt;    &lt;mvc:annotation-driven/&gt;    &lt;mvc:default-servlet-handler/&gt;&lt;/beans&gt;\n\nweb.xml\nSpring配置文件路径启动参数\nCharacterEncodingFilter编码过滤器\nContextLoaderListener配置文件加载监听器\nDispatcherServlet前端控制器\n\n123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;web-app version=\"2.5\"         xmlns=\"http://java.sun.com/xml/ns/javaee\"         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;        &lt;context-param&gt;        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;        &lt;param-value&gt;classpath:spring-context.xml&lt;/param-value&gt;    &lt;/context-param&gt;    &lt;filter&gt;        &lt;filter-name&gt;encoding&lt;/filter-name&gt;        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;        &lt;init-param&gt;            &lt;param-name&gt;encoding&lt;/param-name&gt;            &lt;param-value&gt;UTF-8&lt;/param-value&gt;        &lt;/init-param&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;encoding&lt;/filter-name&gt;        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;    &lt;listener&gt;        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;    &lt;/listener&gt;    &lt;servlet&gt;        &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;        &lt;init-param&gt;            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;            &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt;        &lt;/init-param&gt;    &lt;/servlet&gt;    &lt;servlet-mapping&gt;        &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;        &lt;url-pattern&gt;/&lt;/url-pattern&gt;    &lt;/servlet-mapping&gt;&lt;/web-app&gt;\n\n启动测试测试Controller\n1234567891011121314151617181920package cn.edu.njust.controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.io.PrintWriter;@Controllerpublic class TestController &#123;    @RequestMapping(path=\"/123/\", method= RequestMethod.GET)    public void test01(HttpServletResponse response) throws IOException &#123;        PrintWriter writer = response.getWriter();        writer.print(\"Hello\");    &#125;&#125;\n\n启动\n1mvn tomcat7:run","thumbnail":"/post/SSM整合/cover.jpg","plink":"https://beginc.github.io/post/SSM整合/"},{"title":"Java泛型","date":"2019-09-04T11:32:04.000Z","updated":"2019-09-07T15:50:33.935Z","content":"使用泛型泛型类123class Container&lt;T&gt;&#123;    private T data;&#125;\n\n泛型方法123456789101112131415class Container&lt;T&gt;&#123;    private T data;    public Container(T data) &#123;        this.data = data;    &#125;    public T getData() &#123;        return data;    &#125;    public void setData(T data) &#123;        this.data = data;    &#125;&#125;\n\n静态方法泛型类型&lt;T&gt;不能用于静态方法\n1234567891011121314151617181920class Container&lt;T&gt;&#123;    private T data;    public Container(T data) &#123;        this.data = data;    &#125;    public T getData() &#123;        return data;    &#125;    public void setData(T data) &#123;        this.data = data;    &#125;    // 报错    public static void staticMethod(T data)&#123;    &#125;&#125;\n\n在static修饰符后面加一个，编译就能通过, 这个&lt;T&gt;和Container&lt;T&gt;类型的&lt;T&gt;已经没有任何关系了，可换一个泛型类型\n123456789101112131415161718192021222324252627282930313233343536373839404142class Container&lt;T&gt;&#123;    private T data;        public Container(T data) &#123;        this.data = data;    &#125;    public T getData() &#123;        return data;    &#125;    public void setData(T data) &#123;        this.data = data;    &#125;    // 报错    public static void staticMethod(T data)&#123;    &#125;&#125;class Container&lt;T&gt;&#123;    private T data;        public Container(T data) &#123;        this.data = data;    &#125;    public T getData() &#123;        return data;    &#125;    public void setData(T data) &#123;        this.data = data;    &#125;    // 不报错    public static &lt;K&gt; void staticMethod(K data)&#123;    &#125;&#125;\n\n多个泛型类型1234class Container&lt;T, K&gt;&#123;    private T dataT;    private T dataK;&#125;\n\n擦拭法Java语言的泛型实现方式是擦拭法（Type Erasure）。\n所谓擦拭法是指，虚拟机对泛型其实一无所知，所有的工作都是编译器做的，编译器把类型&lt;T&gt;一律改成Object，并且根据&lt;T&gt;实现安全的强制类型转换。\n123456789101112131415161718192021222324252627282930313233// 编写的代码class Container&lt;T&gt;&#123;    private T data;        public Container(T data) &#123;        this.data = data;    &#125;    public T getData() &#123;        return data;    &#125;    public void setData(T data) &#123;        this.data = data;    &#125;&#125;// JVM执行的代码class Container&#123;    private Object data;        public Container(Object data) &#123;        this.data = data;    &#125;    public Object getData() &#123;        return data;    &#125;    public void setData(Object data) &#123;        this.data = data;    &#125;&#125;\n\n缺点\n\n无法使用基本类型作为泛型，因为基本类型无法转换为Object\n\n无法取得带泛型的Class\n1234Container&lt;String&gt; c1 = new Container&lt;String&gt;(\"123\");Container&lt;Integer&gt; c2 = new Container&lt;String&gt;(123);// trueSystem.out.println(c1.getClass() == c2.getClass());\n\n无法判断带泛型的Class\n123Container&lt;String&gt; c1 = new Container&lt;String&gt;(\"123\");// trueSystem.out.println(c1 isinstance of Container&lt;Integer&gt;.class);\n\n不能实例化T类型\n12// 错误T data = new T();\n\n导致不恰当的覆写方法\n1234// 与equals(Object t)冲突public boolean equals(T t)&#123;    return this == t;&#125;\n\n\n\n泛型继承TODO\n通配符extends通配符","thumbnail":"/post/Java泛型/cover.jpg","plink":"https://beginc.github.io/post/Java泛型/"},{"title":"Java注解","date":"2019-08-29T14:02:41.000Z","updated":"2019-08-29T15:15:20.000Z","content":"注解简介注解只是一种特殊的注释，不对代码逻辑产生任何影响，具体的作用取决于程序如何使用这个注释信息。\n注解的作用编译器使用的注解编译后即被丢弃，不会进入.class文件\n\n@Override编译器检查方法是否正确实现了重载\n@SupressWarnings告诉编译器忽略此处的警告\n\n工具处理有些工具会在加载class的时候，对class做动态修改，实现一些特殊的功能。这类注解会被编译进入.class文件，但加载结束后并不会存在于内存中。\n运行期可读取此类注解在程序运行期能够读取的注解，它们在加载后一直存在于JVM中，这也是最常用的注解。\n注解的参数注解可配置一些基本参数。大部分注解会有一个名为value的配置参数，对此参数赋值，可以只写常量，相当于省略了value参数。\n\n所有基本类型\nString\n枚举类型\n\n定义注解基本定义\n@interface定义注解\n类型 名字() default 值定义参数\n\n12345public @interface Report &#123;    int type() default 0;    String level() default \"info\";    String value() default \"\";&#125;\n\n元注解元注解负责修饰注解，对注解进行一些配置\n@Target指定注解可以放的位置(必配置)\n\nElementType.TYPE类或接口\nElementType.FIELD字段\nElementType.METHOD方法\nElementType.CONSTRUCTOR构造方法\nElementType.PARAMETER方法参数\n\n12345678910111213141516// 只能加在方法上@Target(ElementType.METHOD)public @interface Report &#123;    int type() default 0;    String level() default \"info\";    String value() default \"\";&#125;// 加在多个位置上@Target(&#123;    ElementType.METHOD,    ElementType.FIELD&#125;)public @interface Report &#123;    ...&#125;\n\n@Retention定义注解的生命周期(必配置)\n\nRetentionPolicy.SOURCE注解在编译期就被丢掉了\nRetentionPolicy.CLASS注解仅保存在class文件中，它们不会被加载进JVM(默认)\nRetentionPolicy.RUNTIME注解会被加载进JVM，并且在运行期可以被程序读取\n\n@Repeatable定义注解是否可重复进行注解\n123456789101112@Repeatable@Target(ElementType.TYPE)public @interface Report &#123;    int type() default 0;    String level() default \"info\";    String value() default \"\";&#125;@Report(type=1, level=\"debug\")@Report(type=2, level=\"warning\")public class Hello &#123;&#125;\n\n@Inherited定义子类是否可以继承父类的注解，仅针对@Target(ElementType.TYPE)有效\n使用注解RetentionPolicy.SOURCE(暂不讨论)RetentionPolicy.CLASS(暂不讨论)RetentionPolicy.RUNTIME获取注解详见Java反射\n使用注解如何使用注解完全取决于程序的目的\n12345678910111213141516171819202122232425262728293031@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@interface OptimizerConfig&#123;    String type() default \"SGD\";    double lr() default 0.02;    int epoch() default 12;&#125;@OptimizerConfig(type=\"SGD\", lr=0.01, epoch=20)class Model&#123;    private String type = \"SGD\";    private double lr = 0.02;    private int epoch = 12;    public Model()&#123;        Class cls = getClass();        if(cls.isAnnotationPresent(OptimizerConfig.class))&#123;            OptimizerConfig config = (OptimizerConfig) cls.getAnnotation(OptimizerConfig.class);            this.type =  config.type();            this.lr = config.lr();            this.epoch = config.epoch();        &#125;    &#125;    public void run()&#123;        System.out.println(\"Running with config:\");        System.out.println(\"Type:\" + type);        System.out.println(\"Lr:\" + lr);        System.out.println(\"Epoch:\" + epoch);    &#125;&#125;\n\n","thumbnail":"/post/Java注解/cover.jpg","plink":"https://beginc.github.io/post/Java注解/"},{"title":"SpringIoC容器","date":"2019-08-29T06:50:15.000Z","updated":"2019-08-29T09:46:46.000Z","content":"Spring IoC容器Spring IoC容器简介IoC容器提供了控制反转(IoC)和依赖注入(DI)功能，程序将bean的创建过程交由IoC容器完成，并为其完成依赖属性的注入。\n两种IoC容器的实现\nClassPathXmlApplicationContext读取classpath下的配置文件建立IoC容器\nFileSystemXmlApplicationContext读取文件系统下的配置文件建立IoC容器\n\n基本配置12345678910&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"    xsi:schemaLocation=\"http://www.springframework.org/schema/beans        https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;    &lt;bean id=\"student\" class=\"bean.Student\"&gt;       &lt;/bean&gt;&lt;/beans&gt;\n\n导入其他容器配置文件\n路径都是相对于当前配置文件\n\n12345&lt;beans&gt;    &lt;import resource=\"spring-services.xml\"/&gt;    &lt;bean id=\"studentService\" class=\"service.StudentService\"/&gt;&lt;/beans&gt;\n\n使用IoC容器\ngetBean()\n可一次读取多个配置文件\n\n12ApplicationContext context = new ClassPathXmlApplicationContext(\"spring-context.xml\", \"spring-tx.xml\");Student student = context.getBean(\"student\", Student.class);\n\nBean命名\nid唯一，不可有特殊符号\nname唯一，可有特殊符号\n\n12&lt;bean id=\"student\" class=\"bean.Student\"/&gt;&lt;bean name=\"student1\" class=\"bean.Student\"/&gt;\n\n别名1&lt;alias name=\"student\" alias=\"johnStudent\"/&gt;\n\n初始化Bean无参构造器\n调用无参构造器\n使用setter注入依赖\n\n123&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"name\" value=\"John\"/&gt;&lt;/bean&gt;\n\n静态工厂\nclass此时指定工厂类\nfactory-method指定生产该对象的工厂方法\n\n123456public class StudentFactory &#123;    public static Student buildStudentStatic() &#123;        return new Student();    &#125;&#125;\n\n123&lt;bean id=\"bean\" class=\"factory.StudentFactory\" factory-method=\"buildStudentStatic\"&gt;    &lt;property name=\"name\" value=\"John\"/&gt;&lt;/bean&gt;\n\n实例工厂先实例化工厂，再生产Bean\n\nfactory-bean指定工厂实例\nfactory-method指定工厂方法\n\n1234567public class StudentFactory &#123;    public Student buildStudent() &#123;        return new Student();    &#125;&#125;\n\n12345&lt;bean id=\"studentFactory\" class=\"factory.StudentFactory\"&gt;&lt;/bean&gt;&lt;bean id=\"student\" factory-bean=\"studentFactory\" factory-method=\"buildStudent\"&gt;&lt;/bean&gt;\n\n依赖注入方式使用构造函数注入\nconstructor-arg\n\n按名字注入必须在编译时开启debug flag, 或者在构造器上写上@ConstructorProperties({&quot;id&quot;, &quot;name&quot;, &quot;age&quot;})\n123456// @ConstructorProperties(&#123;\"id\", \"name\", \"age\"&#125;)public Student(Integer id, String name, Integer age) &#123;    this.id = id;    this.name = name;    this.age = age;&#125;\n\n12345&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;constructor-arg name=\"id\" value=\"1\"/&gt;    &lt;constructor-arg name=\"name\" value=\"John\"/&gt;    &lt;constructor-arg name=\"age\" value=\"18\"/&gt;&lt;/bean&gt;\n\n按类型注入\n1234public Student(Integer id, String name) &#123;    this.id = id;    this.name = name;&#125;\n\n1234&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;constructor-arg type=\"java.lang.Integer\" value=\"1\"/&gt;    &lt;constructor-arg type=\"java.lang.String\" value=\"John\"/&gt;&lt;/bean&gt;\n\n按索引注入\n12345public Student(Integer id, String name, Integer age) &#123;    this.id = id;    this.name = name;    this.age = age;&#125;\n\n12345&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;constructor-arg index=\"0\" value=\"1\"/&gt;    &lt;constructor-arg index=\"1\" value=\"John\"/&gt;    &lt;constructor-arg index=\"2\" value=\"18\"/&gt;&lt;/bean&gt;\n\n构造器注入循环依赖若beanA依赖beanB，beanB依赖beanA，则使用构造器注入会引起不可解决的循环依赖，解决方法为换为使用setter注入（先建立对象，再进行注入）\n使用setter注入\n必须要有无参构造器\n\n1234567891011public void setId(Integer id) &#123;    this.id = id;&#125;public void setName(String name) &#123;    this.name = name;&#125;public void setAge(Integer age) &#123;    this.age = age;&#125;\n\n12345&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"id\" value=\"1\"/&gt;    &lt;property name=\"name\" value=\"John\"/&gt;    &lt;property name=\"age\" value=\"18\"/&gt;&lt;/bean&gt;\n\n依赖注入具体配置普通类型\nvalue\n&lt;idref&gt;\n\nvalue\n12345&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"id\" value=\"1\"/&gt;    &lt;property name=\"name\" value=\"John\"/&gt;    &lt;property name=\"age\" value=\"18\"/&gt;&lt;/bean&gt;\n\n&lt;idref&gt;用来引用另外一个bean的id(String)，并进行检查，确保其存在\n1234567&lt;bean id=\"John\" class=\"bean.Student\"&gt;&lt;/bean&gt;&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"name\"&gt;        &lt;idref bean=\"John\"/&gt;    &lt;property/&gt;&lt;/bean&gt;\n\n等价于name值为John + 检查引用的John这个bean是否存在\n12345&lt;bean id=\"John\" class=\"bean.Student\"&gt;&lt;/bean&gt;&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"name\" value=\"referencedBean\"/&gt;&lt;/bean&gt;\n\n引用\nref\n\n12345&lt;bean id=\"bean1\" class=\"bean.Bean1\"&gt;&lt;/bean&gt;&lt;bean id=\"bean2\" class=\"bean.Bean2\"&gt;    &lt;property name=\"Bean1\" ref=\"bean1\"/&gt; &lt;/bean&gt;\n\nparent在基于spring框架开发的项目中，如果有多个bean都是一个类的实例，如配置多个数据源时，大部分配置的属性都一样，只有少部分不一样，经常是copy上一个的定义，然后修改不一样的地方。其实spring bean定义也可以和对象一样进行继承。\n123456789&lt;bean id=\"student1\" class=\"bean.Student\"&gt;    &lt;property name=\"id\" value=\"1\"/&gt;    &lt;property name=\"name\" value=\"John\"/&gt;    &lt;property name=\"age\" value=\"18\"/&gt;&lt;/bean&gt;&lt;!-- name和age与student1一致--&gt;&lt;bean id=\"student2\" class=\"bean.Student\" parent=\"student1\"&gt;    &lt;property name=\"id\" value=\"2\"/&gt;&lt;/bean&gt;\n\n内部Bean\n类似于匿名对象，内部Bean不需要id\n内部类的scope属性被忽略，因为总是和外部Bean一起创建\n\n1234567&lt;bean id=\"bean2\" class=\"bean.Bean2\"&gt;    &lt;property name=\"Bean1\"&gt;        &lt;bean class=\"bean.Bean1\"&gt;            &lt;property name=\"name\" value=\"John\"/&gt;        &lt;/bean&gt;    &lt;/property&gt; &lt;/bean&gt;\n\n集合\nlist对应List\nmap对应Map\nset对应Set\nprops对应Properties\n\nProperty\n\nkey-type指定键类型\nvalue-type指定值类型\n也可以不指定类型，由Spring来自动转换\n\n12345678&lt;bean id=\"bean\" class=\"bean.Bean\"&gt;    &lt;property name=\"prop\"&gt;        &lt;props key-type=\"java.lang.String\" value-type=\"java.lang.String\"&gt;            &lt;prop key=\"name\"&gt;John&lt;/prop&gt;            &lt;prop key=\"age\"&gt;18&lt;/prop&gt;        &lt;/props&gt;    &lt;/property&gt;&lt;/bean&gt;\n\nList\n\nvalue-type指定值类型\n也可以不指定类型，由Spring来自动转换\n\n12345678&lt;bean id=\"bean\" class=\"bean.Bean\"&gt;    &lt;property name=\"prop\"&gt;        &lt;list value-type=\"java.lang.String\"&gt;            &lt;value&gt;John&lt;/value&gt;            &lt;ref bean=\"anotherBean\"/&gt;        &lt;/list&gt;    &lt;/property&gt;&lt;/bean&gt;\n\nMap\n\nkey-type指定键类型\nvalue-type指定值类型\n也可以不指定类型，由Spring来自动转换\n\n12345678&lt;bean id=\"bean\" class=\"bean.Bean\"&gt;    &lt;property name=\"prop\"&gt;        &lt;map key-type=\"java.lang.String\" value-type=\"java.lang.String\"&gt;            &lt;entry key=\"name\" value=\"John\"/&gt;            &lt;entry key=\"anotherBean\" value-ref=\"anotherBean\"/&gt;        &lt;/map&gt;    &lt;/property&gt;&lt;/bean&gt;\n\nSet\n\nvalue-type指定值类型\n也可以不指定类型，由Spring来自动转换\n\n12345678&lt;bean id=\"bean\" class=\"bean.Bean\"&gt;    &lt;property name=\"prop\"&gt;        &lt;set value-type=\"java.lang.String\"&gt;            &lt;value&gt;John&lt;/value&gt;            &lt;ref bean=\"anotherBean\"/&gt;        &lt;/set&gt;    &lt;/property&gt;&lt;/bean&gt;\n\n使用parent和merge进行集合的合并在使用parent进行继承时，可指定集合属性的merge为true，即可将集合与parent的集合进行合并（相同的属性会被child替换）\n\n不能合并类型不同的集合\n\n123456789101112131415&lt;bean id=\"bean1\" class=\"bean.Bean\"&gt;    &lt;property name=\"prop\"&gt;        &lt;map&gt;            &lt;entry key=\"name\" value=\"John\"/&gt;            &lt;entry key=\"anotherBean\" value-ref=\"anotherBean\"/&gt;        &lt;/map&gt;    &lt;/property&gt;&lt;/bean&gt;&lt;bean id=\"bean2\" class=\"bean.Bean\"&gt;    &lt;property name=\"prop\"&gt;        &lt;map merge=\"true\"&gt;            &lt;entry key=\"name\" value=\"Bob\"/&gt;        &lt;/map&gt;    &lt;/property&gt;&lt;/bean&gt;\n\n空值\n&lt;null/&gt;用以区分空值和空字符串\n\n空串\n123&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"name\" value=\"\"/&gt;&lt;/bean&gt;\n\n空值\n12345&lt;bean id=\"student\" class=\"bean.Student\"&gt;    &lt;property name=\"name\"&gt;        &lt;null/&gt;&gt;    &lt;/property&gt;&lt;/bean&gt;\n\n复合属性\n路径上的最后一个属性可为null，前面的不能为null\n\n注入fred属性中bob属性中的sammy属性值123\n123&lt;bean id=\"something\" class=\"things.ThingOne\"&gt;    &lt;property name=\"fred.bob.sammy\" value=\"123\" /&gt;&lt;/bean&gt;","thumbnail":"/post/Spring IoC容器/cover.jpg","plink":"https://beginc.github.io/post/Spring IoC容器/"},{"title":"配置文件整合","date":"2019-08-28T14:27:01.000Z","updated":"2019-09-06T03:18:36.808Z","content":"SpringapplicationContext.xml\n12345678910111213141516171819&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"        xmlns:context=\"http://www.springframework.org/schema/context\"        xmlns:aop=\"http://www.springframework.org/schema/aop\"        xmlns:tx=\"http://www.springframework.org/schema/tx\"        xmlns:mvc=\"http://www.springframework.org/schema/mvc\"        xsi:schemaLocation=\"http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context        http://www.springframework.org/schema/context/spring-context.xsd        http://www.springframework.org/schema/aop        http://www.springframework.org/schema/aop/spring-aop.xsd        http://www.springframework.org/schema/tx        http://www.springframework.org/schema/tx/spring-tx.xsd        http://www.springframework.org/schema/mvc        http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt;&lt;/beans&gt;\n\nSpringMVCspring-mvc.xml\n123456789101112&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txmlns:context=\"http://www.springframework.org/schema/context\"\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\txsi:schemaLocation=\"http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context.xsd \"&gt;\t &lt;/beans&gt;\n\nMyBatisSqlMapConfig.xml\n1234567&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configurationPUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;&lt;/configuration&gt;\n\nmapper.xml\n1234567&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"\"&gt;&lt;/mapper&gt;\n\nJDBCjdbc.properties\n1234jdbc.driver=com.mysql.cj.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/easypay?serverTimezone=UTCjdbc.username=rootjdbc.password=Hgld521125\n\nLogbacklogback.xml\n12345678910&lt;configuration&gt;    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;        &lt;encoder&gt;            &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%thread][%-5level][%logger&#123;36&#125;]: %msg%n&lt;/pattern&gt;        &lt;/encoder&gt;    &lt;/appender&gt;    &lt;root level=\"WARN\"&gt;        &lt;appender-ref ref=\"STDOUT\"/&gt;    &lt;/root&gt;&lt;/configuration&gt;\n\nSSM整合pom.xml\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;packaging&gt;war&lt;/packaging&gt;    &lt;groupId&gt;cn.edu.njust&lt;/groupId&gt;    &lt;artifactId&gt;Reading&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;properties&gt;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;    &lt;/properties&gt;    &lt;dependencies&gt;        &lt;!--MyBatis + MySQL--&gt;        &lt;dependency&gt;            &lt;groupId&gt;mysql&lt;/groupId&gt;            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;            &lt;version&gt;8.0.17&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;            &lt;version&gt;3.2.7&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--SpringMVC--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;            &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--AOP--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;            &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;            &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--Spring JDBC--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;            &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;            &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--Spring + MyBatis--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;            &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;            &lt;version&gt;1.2.2&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--test--&gt;        &lt;dependency&gt;            &lt;groupId&gt;junit&lt;/groupId&gt;            &lt;artifactId&gt;junit&lt;/artifactId&gt;            &lt;version&gt;4.10&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework&lt;/groupId&gt;            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;            &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;        &lt;/dependency&gt;        &lt;!--Servlet + JSP + JSTL--&gt;        &lt;dependency&gt;            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;            &lt;version&gt;4.0.1&lt;/version&gt;            &lt;scope&gt;provided&lt;/scope&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;            &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;            &lt;version&gt;2.3.3&lt;/version&gt;            &lt;scope&gt;provided&lt;/scope&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;            &lt;artifactId&gt;jstl&lt;/artifactId&gt;            &lt;version&gt;1.2&lt;/version&gt;            &lt;scope&gt;provided&lt;/scope&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;    &lt;build&gt;        &lt;plugins&gt;            &lt;plugin&gt;                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;                &lt;version&gt;2.1&lt;/version&gt;                &lt;configuration&gt;                    &lt;contextReloadable&gt;true&lt;/contextReloadable&gt;                &lt;/configuration&gt;            &lt;/plugin&gt;        &lt;/plugins&gt;    &lt;/build&gt;&lt;/project&gt;\n\nweb.xml\n123456789101112131415161718192021222324252627282930313233343536373839&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;web-app version=\"2.5\"         xmlns=\"http://java.sun.com/xml/ns/javaee\"         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;        &lt;context-param&gt;        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;        &lt;param-value&gt;classpath:spring-context.xml&lt;/param-value&gt;    &lt;/context-param&gt;    &lt;filter&gt;        &lt;filter-name&gt;encoding&lt;/filter-name&gt;        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;        &lt;init-param&gt;            &lt;param-name&gt;encoding&lt;/param-name&gt;            &lt;param-value&gt;UTF-8&lt;/param-value&gt;        &lt;/init-param&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;encoding&lt;/filter-name&gt;        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;    &lt;listener&gt;        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;    &lt;/listener&gt;    &lt;servlet&gt;        &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;        &lt;init-param&gt;            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;            &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt;        &lt;/init-param&gt;    &lt;/servlet&gt;    &lt;servlet-mapping&gt;        &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;        &lt;url-pattern&gt;/&lt;/url-pattern&gt;    &lt;/servlet-mapping&gt;&lt;/web-app&gt;","thumbnail":"/post/配置文件整合/cover.jpg","plink":"https://beginc.github.io/post/配置文件整合/"},{"title":"Java日志框架","date":"2019-08-28T14:26:52.000Z","updated":"2019-09-07T14:04:34.456Z","content":"Java日志框架分类日志实现框架实现具体的记录日志的操作的框架\n\nlog4j\nlogback\n其他\n\n日志门面框架主要用于适配各种不同的底层日志实现框架，提供统一访问的API，充当门面\n\nslf4j\ncommons-logging\n\nSLF4J包介绍\nslf4j-api-1.7.27.jar核心包，只要使用slf4j则必须引入\nslf4j-log4j12-1.7.27.jar绑定log4j1.2版本的包\nslf4j-jdk14-1.7.27.jar绑定使用java.util.logging的包\nslf4j-nop-1.7.27.jar不进行任何日志操作\nslf4j-simple-1.7.27.jar使用简单的日志框架实现的包\nslf4j-jcl-1.7.27.jar绑定使用Jakarta Commons Logging的包\nlogback-classic-1.2.3.jar绑定使用logback的包\n\n绑定具体日志框架\n引入slf4j-api-1.7.27.jar\n引入日志框架的包\n引入对应的绑定日志框架的包\n\n使用\n\nLoggerFactory.getLogger(logger名字)\nlogger.trace()\nlogger.debug()\nlogger.info()\nlogger.warn()\nlogger.error()\n\n12345678910111213141516import org.junit.Test;import org.slf4j.Logger;import org.slf4j.LoggerFactory;public class TestLog &#123;    @Test    public void test01() &#123;        Logger logger = LoggerFactory.getLogger(\"test\");        logger.trace(\"From slf4j, from class &#123;&#125;\", getClass().getName());        logger.debug(\"From slf4j, from class &#123;&#125;\", getClass().getName());        logger.info(\"From slf4j, from class &#123;&#125;\", getClass().getName());        logger.warn(\"From slf4j, from class &#123;&#125;\", getClass().getName());        logger.error(\"From slf4j, from class &#123;&#125;\", getClass().getName());    &#125;&#125;\n\nLogback包介绍\nlogback-core.jar基础核心包\nlogback-classic.jar对slf4j API的直接实现\nlogback-access.jar实现在HTTP环境中进行日志\n\nLogger Context负责生产logger，并将所有logger组织成一个树的层次\n\ncom.foo是com.foo.Bar的parent logger(用 . 来表示继承关系)\n\n日志级别基本日志级别\nTRACE\nDEBUG\nINFO\nWARN\nERROR\nOFF关闭日志\n\n日志级别继承若一个logger没有设置日志级别，则它会从离它最近的继承层次上的parent logger继承日志级别\n\n\n\nAppender负责将日志输出到具体的目的地\nAppender的加性性质若一个logger的additivity flag被设置为true，则它的祖先logger的Appender都会作用在它上\n\n\n常用AppenderConsoleAppender输出到控制台\n\ntarget目的地，为System.out或System.err\n\nFileAppender输出到文件\n\nfile文件名\n\nRollingFileAppender(TODO)继承与FileAppender，日志达到一定数量时会将输出文件换到另一个\n\nfile文件名\nrollingPolicy\ntriggeringPolicy指定何时触发滚动\n\n配置找配置文件的步骤\n找clasapath:logback-test.xml\n找clasapath:logback.groovy\n找clasapath:logback.xml\n找META-INF\\services\\ch.qos.logback.classic.spi中指定的类(ServiceProvider)\n使用BasicConfigurator进行基本配置，默认输出到控制台\n\n基本配置1234567891011121314&lt;configuration&gt;  &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;    &lt;encoder&gt;      &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%thread]][%-5level][%logger&#123;36&#125;]: %msg%n&lt;/pattern&gt;    &lt;/encoder&gt;  &lt;/appender&gt;  &lt;logger name=\"mylogger\" level=\"INFO\" /&gt;  &lt;root level=\"DEBUG\"&gt;    &lt;appender-ref ref=\"STDOUT\" /&gt;  &lt;/root&gt;&lt;/configuration&gt;\n\n详细配置Status Data\n\ndebug=&quot;true&quot;，会自动打印出状态信息(如找配置文件的步骤)\n\n1234567891011121314&lt;configuration debug=\"true\"&gt;  &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;    &lt;encoder&gt;      &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%thread]][%-5level][%logger&#123;36&#125;]: %msg%n&lt;/pattern&gt;    &lt;/encoder&gt;  &lt;/appender&gt;  &lt;logger name=\"mylogger\" level=\"INFO\" /&gt;  &lt;root level=\"DEBUG\"&gt;    &lt;appender-ref ref=\"STDOUT\" /&gt;  &lt;/root&gt;&lt;/configuration&gt;\n\nlogger\n\nname\nlevel\nadditivity设置Appender加性\n\nappender\n\nname\nclass\nencoder\n任意自身属性\n\n12345678&lt;appender name=\"FILE\" class=\"ch.qos.logback.core.FileAppender\"&gt;    &lt;file&gt;        log.txt    &lt;/file&gt;    &lt;encoder&gt;        &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%thread]][%-5level][%logger&#123;36&#125;]: %msg%n&lt;/pattern&gt;    &lt;/encoder&gt;&lt;/appender&gt;\n\nproperty用来定义一些变量\n\nname属性名\nvalue属性值\nfile引入properties文件\nscope\nlocal只在初始化配置阶段可用\ncontext在整个LoggerContext存在期间都可用\nsystem插入JVM&#39;s system properties只要JVM存在就能访问\n\n\n\n1234567891011121314&lt;configuration&gt;  &lt;property name=\"USER_HOME\" value=\"/home/sebastien\" /&gt;  &lt;property file=\"src/main/java/chapters/configuration/variables1.properties\" /&gt;  &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.FileAppender\"&gt;    &lt;file&gt;$&#123;USER_HOME&#125;/myApp.log&lt;/file&gt;    &lt;encoder&gt;      &lt;pattern&gt;%msg%n&lt;/pattern&gt;    &lt;/encoder&gt;  &lt;/appender&gt;  &lt;root level=\"debug\"&gt;    &lt;appender-ref ref=\"FILE\" /&gt;  &lt;/root&gt;&lt;/configuration&gt;\n\n获取context variable\n123Logger logger = LoggerFactory.getLogger(\"test\");LoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();logger.info(context.getProperty(\"file\"));\n\nSpring替换commons-logging为slf4j\n排除spring-core.jar对commons-logging的依赖\n1234567891011&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;/groupId&gt;    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;    &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;    &lt;exclusions&gt;        &lt;exclusion&gt;            &lt;groupId&gt;commons-logging&lt;/groupId&gt;            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;        &lt;/exclusion&gt;    &lt;/exclusions&gt;&lt;/dependency&gt;\n\n引入slf4j\n12345&lt;dependency&gt;    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;    &lt;version&gt;1.7.25&lt;/version&gt;&lt;/dependency&gt;\n\n引入辅助包进行适配\n12345&lt;dependency&gt;    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;    &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;    &lt;version&gt;1.7.25&lt;/version&gt;&lt;/dependency&gt;\n\n\n\nMyBatis指定日志框架在SqlMapConfig.xml中settings配置logImpl\n\n可为SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING\n\n12345678910111213141516171819202122232425262728&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;    &lt;properties resource=\"jdbc.properties\"/&gt;    &lt;settings&gt;        &lt;setting name=\"logImpl\" value=\"slf4j\"/&gt;    &lt;/settings&gt;    &lt;typeAliases&gt;        &lt;package name=\"bean\"/&gt;    &lt;/typeAliases&gt;    &lt;environments default=\"dev\"&gt;        &lt;environment id=\"dev\"&gt;            &lt;transactionManager type=\"JDBC\"&gt;&lt;/transactionManager&gt;            &lt;dataSource type=\"POOLED\"&gt;                &lt;property name=\"driver\" value=\"$&#123;jdbc.driver&#125;\"/&gt;                &lt;property name=\"url\" value=\"$&#123;jdbc.url&#125;\"/&gt;                &lt;property name=\"username\" value=\"$&#123;jdbc.username&#125;\"/&gt;                &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\"/&gt;            &lt;/dataSource&gt;        &lt;/environment&gt;    &lt;/environments&gt;    &lt;mappers&gt;        &lt;mapper resource=\"sqlmap/ManagerMapper.xml\"/&gt;    &lt;/mappers&gt;&lt;/configuration&gt;\n\n","thumbnail":"/post/Java日志框架/cover.jpg","plink":"https://beginc.github.io/post/Java日志框架/"},{"title":"MyBatis缓存","date":"2019-08-28T13:04:25.000Z","updated":"2019-08-28T16:41:10.000Z","content":"一级缓存一级缓存介绍在应用运行过程中，我们有可能在一次数据库会话中，执行多次查询条件完全相同的SQL，MyBatis提供了一级缓存的方案优化这部分场景，如果是相同的SQL语句，会优先命中一级缓存，避免直接对数据库进行查询，提高性能。在每个SqlSession中持有Executor，每个Executor中有一个LocalCache。当用户发起查询时，MyBatis根据当前执行的语句生成MappedStatement，在Local Cache进行查询，如果缓存命中的话，直接返回结果给用户，如果缓存没有命中的话，查询数据库，结果写入Local Cache，最后返回结果给用户。\n一级缓存配置在SqlMapConfig.xml的settings中进行配置，默认值为SESSION\n\nSESSION缓存作用一次SqlSession\nSTATEMENT只对当前执行的这一个Statement有效\n\n1234567&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;    &lt;settings&gt;        &lt;setting name=\"localCacheScope\" value=\"SESSION\"/&gt;    &lt;/settings&gt;&lt;/configuration&gt;\n\n1234student = mapper.findById(1); //不走缓存student = mapper.findById(1); //缓存student = mapper.findById(1); //缓存student = mapper.findById(1); //缓存\n\n调试分析\n进入invoke方法????\n\n调用cachedMapperMethod，methodCache为ConcurrentHashMap，在其中获取存储的方法对象\n\n没有找到该method对象，说明没有进行过调用，为其新建一个MapperMethod对象，存储到methodCache中\n\n执行方法\n\n\n一级缓存特点\nSESSION Scope缓存只在一个session内有效\n一个session内多次使用同一个查询，除第一次查询外，其他走缓存\n使用修改（增，删，改）操作后一级缓存会被清空失效\n无法适应分布式下多个session的缓解，一级缓存会导致读脏数据\n\n一级缓存导致脏读123456789101112131415161718192021SqlSession session1 = factory.openSession(true);SqlSession session2 = factory.openSession(true);StudentMapper mapper1 = session1.getMapper(StudentMapper.class);StudentMapper mapper2 = session2.getMapper(StudentMapper.class);// Student(name=\"Bob\")student = mapper1.findById(1); //不走缓存，建立缓存// Student(name=\"Bob\")student = mapper1.findById(1); //session1缓存// Student(name=\"Bob\")student = mapper2.findById(1); //不走缓存，建立缓存// Student(name=\"Bob\")student = mapper2.findById(1); //session2缓存student.setName(\"John\"); mapper1.updateName(student); //更新名字，session1清空缓存session1.commit()// Student(name=\"John\")student = mapper1.findById(1); //不走缓存，建立缓存// Student(name=\"Bob\")student = mapper2.findById(1); //继续走缓存，脏读!!\n\n解决方法\n将localSessionScope设置为STATEMENT\n","thumbnail":"/post/MyBatis缓存/cover.jpg","plink":"https://beginc.github.io/post/MyBatis缓存/"},{"title":"Java反射","date":"2019-08-28T12:32:12.000Z","updated":"2019-09-07T14:41:42.802Z","content":"Class与反射 Java除了基本类型外都是class，class是由JVM在执行过程中动态加载的。JVM在第一次读取到一种class类型时，将其加载进内存。每加载一种class，JVM就为其创建一个Class类型的实例，并关联起来。注意：这里的Class类型是一个名叫Class的class。该Class包含了该类型的所有信息。通过Class实例获取类信息的方式叫做反射\n类动态加载JVM在执行Java程序的时候，并不是一次性把所有用到的class全部加载到内存，而是第一次需要用到class时才加载。利用这个特性我们可以在运行时动态加载类。\n获取Class实例\n类型.class\n1Class cls = String.class;\n\n类的实例.getClass()\n12String s = \"123\";Class cls = s.getClass();\n\nClass.forName(&quot;java.lang.String&quot;)\n\n\n类的信息\ncls.getName()获取全称\ncls.getSimpleName()获取类名\ncls.getPackage().getName()获取包名\ncls.isInterface()\ncls.isEnum()\ncls.isArray()\ncls.isPrimitive()\n\n字段信息获取Field对象\nField getField(name)根据字段名获取某个public的field（包括父类）\nField getDeclaredField(name)根据字段名获取当前类的某个field（不包括父类)\nField[] getFields()获取所有public的field（包括父类）\nField[] getDeclaredFields()获取当前类的所有field（不包括父类）\n\n获取Field对象的信息\ngetName()返回字段名称，例如，”name”；\ngetType()返回字段类型，也是一个Class实例，例如，String.class；\ngetModifiers()返回字段的修饰符，它是一个int，不同的bit表示不同的含义。\n可用Modifier类的一些静态方法来判断\n12345678910&gt; Field f = String.class.getDeclaredField(\"value\");&gt; f.getName(); // \"value\"&gt; f.getType(); // class [B 表示byte[]类型&gt; int m = f.getModifiers();&gt; Modifier.isFinal(m); // true&gt; Modifier.isPublic(m); // false&gt; Modifier.isProtected(m); // false&gt; Modifier.isPrivate(m); // true&gt; Modifier.isStatic(m); // false&gt;\n\n\n\n获取Field的值\n字段.get(类的实例对象)访问实例对象的该字段值\n字段.setAccessible(true)设置实例对象该字段值的可访问性\n\n123456789101112131415161718public class Main &#123;    public static void main(String[] args) throws Exception &#123;        Object p = new Person(\"Xiao Ming\");        Class c = p.getClass();        Field f = c.getDeclaredField(\"name\");        Object value = f.get(p);        System.out.println(value); // \"Xiao Ming\"    &#125;&#125;class Person &#123;    private String name;    public Person(String name) &#123;        this.name = name;    &#125;&#125;\n\n设置字段的值\n字段.set(类的实例对象, 值)访问实例对象的该字段值\n字段.setAccessible(true)设置实例对象该字段值的可访问性\n\n123456789101112131415161718192021222324public class Main &#123;    public static void main(String[] args) throws Exception &#123;        Person p = new Person(\"Xiao Ming\");        System.out.println(p.getName()); // \"Xiao Ming\"        Class c = p.getClass();        Field f = c.getDeclaredField(\"name\");        f.setAccessible(true);        f.set(p, \"Xiao Hong\");        System.out.println(p.getName()); // \"Xiao Hong\"    &#125;&#125;class Person &#123;    private String name;    public Person(String name) &#123;        this.name = name;    &#125;    public String getName() &#123;        return this.name;    &#125;&#125;\n\n方法信息获取Method对象\nMethod getMethod(name, Class...)获取某个public的Method（包括父类）(第二个参数parameterTypes是按声明顺序标识该方法形参类型，可用于重载的情况)\nMethod getDeclaredMethod(name, Class...)获取当前类的某个Method（不包括父类）(第二个参数parameterTypes是按声明顺序标识该方法形参类型，可用于重载的情况)\nMethod[] getMethods()获取所有public的Method（包括父类）\nMethod[] getDeclaredMethods()获取当前类的所有Method（不包括父类）\n\n获取Method信息\ngetName()返回方法名称，例如：”getScore”；\ngetReturnType()返回方法返回值类型，也是一个Class实例，例如：String.class；\ngetParameterTypes()返回方法的参数类型，是一个Class数组，例如：{String.class, int.class}；\ngetModifiers()返回方法的修饰符，它是一个int，不同的bit表示不同的含义。\n\n调用Method\nMethod.invoke(对象实例，...)传入对象实例和参数(静态方法第一个参数为null)\nMethod.setAccessible(true)调用非public方法时需要设置允许调用\n\n构造方法信息直接使用无参构造方法创建实例\nnewInstance()\n\n1Persons p = Persons.class.newInstance();\n\n获取Constructor对象\ngetConstructor(Class...)获取某个public的Constructor。\ngetDeclaredConstructor(Class...)获取某个Constructor。\ngetConstructors()获取所有public的Constructor。\ngetDeclaredConstructors()获取所有Constructor。\n\n调用Constructor\nnewInstance()\nsetAccessable(true)获取访问权限\n\n12Constructor cons1 = Integer.class.getConstructor(int.class);Integer n1 = (Integer) cons1.newInstance(123);\n\n注解信息判断注解是否存在\nClass.isAnnotationPresent(Class)\nField.isAnnotationPresent(Class)\nMethod.isAnnotationPresent(Class)\nConstructor.isAnnotationPresent(Class)\n\n获取Annotation对象获取指定的注解(需要手动转型)\n\nClass.getAnnotation(Class)\nField.getAnnotation(Class)\nMethod.getAnnotation(Class)\nConstructor.getAnnotation(Class)\n\n获取所有的注解\n\nClass.getAnnotations()\nField.getAnnotations()\nMethod.getAnnotations()\nConstructor.getAnnotations()\n\n12345678910111213141516171819202122232425262728293031@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)@interface OptimizerConfig&#123;    String type() default \"SGD\";    double lr() default 0.02;    int epoch() default 12;&#125;@OptimizerConfig(type=\"SGD\", lr=0.01, epoch=20)class Model&#123;    private String type = \"SGD\";    private double lr = 0.02;    private int epoch = 12;    public Model()&#123;        Class cls = getClass();        if(cls.isAnnotationPresent(OptimizerConfig.class))&#123;            OptimizerConfig config = (OptimizerConfig) cls.getAnnotation(OptimizerConfig.class);            this.type =  config.type();            this.lr = config.lr();            this.epoch = config.epoch();        &#125;    &#125;    public void run()&#123;        System.out.println(\"Running with config:\");        System.out.println(\"Type:\" + type);        System.out.println(\"Lr:\" + lr);        System.out.println(\"Epoch:\" + epoch);    &#125;&#125;\n\n获取方法参数的注解方法参数本身可以看成一个数组，而每个参数又可以定义多个注解，所以，一次获取方法参数的所有注解就必须用一个二维数组来表示。\n12345678910111213141516public void hello(@NotNull @Range(max=5) String name, @NotNull String prefix) &#123;&#125;// 获取Method实例:Method m = ...// 获取所有参数的Annotation:Annotation[][] annos = m.getParameterAnnotations();// 第一个参数（索引为0）的所有Annotation:Annotation[] annosOfName = annos[0];for (Annotation anno : annosOfName) &#123;    if (anno instanceof Range) &#123; // @Range注解        Range r = (Range) anno;    &#125;    if (anno instanceof NotNull) &#123; // @NotNull注解        NotNull n = (NotNull) anno;    &#125;&#125;\n\n获取继承关系获取父类的Class\ngetSuperClass()\n\n12Class cls = Integer.class;Class superCls = cls.getSuperClass();\n\n获取Interface用来查询类实现的接口(只返回直接实现的接口，不返回父类实现的)\n\ngetInterfaces()\n\n123Class cls = Integer.class;// Interface也是ClassClass[] interfaces = cls.getInterfaces();\n\n判断继承关系\nisinstanceof, A isinstancesof B当A为B类或者B类的子类时，返回true(向下判断)\nisAssignableFrom, A.isAssignableFrom(B)当B能向上转型为A时返回true(向上判断)\n\n动态代理动态代理技术即可实现在运行时动态创建实现某个Interface的实例。动态代理实际上是JDK在运行期动态创建class字节码并加载的过程。\n\nInvocationHandler负责进行具体方法的实现或者增强\nProxy.newProxyInstance()创建代理对象\n\n1234567891011121314151617181920212223242526272829interface Flyable&#123;    public void fly();&#125;public class Main &#123;    public static void main(String[] args) &#123;        InvocationHandler handler = new InvocationHandler() &#123;            @Override            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;                if(method.getName().equals(\"fly\"))&#123;                    System.out.println(\"判断该方法为目标方法，下面开始实现\");                    System.out.println(\"Flying.....\");                    System.out.println(\"方法实现结束\");                &#125;                System.out.println(\"下面返回参数\");                return null;            &#125;        &#125;;        Flyable flyable = (Flyable) Proxy.newProxyInstance(                Flyable.class.getClassLoader(), // 传入ClassLoader                new Class[]&#123;Flyable.class&#125;, // 传入要实现的接口                handler // 传入InvocationHandler        );        flyable.fly();    &#125;&#125;\n\n","thumbnail":"/post/Java反射/cover.jpg","plink":"https://beginc.github.io/post/Java反射/"},{"title":"SpringMVC入门","date":"2019-08-24T13:42:43.000Z","updated":"2019-08-28T16:39:52.000Z","content":"创建Maven项目\n创建时使用maven-archetype-webapp\n\n编译设置1234567891011121314151617&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\t&lt;groupId&gt;cn.edu.njust&lt;/groupId&gt;\t&lt;artifactId&gt;springmvc01&lt;/artifactId&gt;\t&lt;packaging&gt;war&lt;/packaging&gt;\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\t&lt;name&gt;springmvc01 Maven Webapp&lt;/name&gt;\t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\t&lt;properties&gt;\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\t\t&lt;maven.compiler.source&gt;12&lt;/maven.compiler.source&gt;\t\t&lt;maven.compiler.target&gt;12&lt;/maven.compiler.target&gt;\t&lt;/properties&gt;&lt;/project&gt;\n\n引入依赖\nSpring Web MVC\n此处需要注意spring-webmvc包和spring-web的区别\n\n使用spring开发web应用一定依赖spring-web但不一定使用SpringMVC\n使用SpringMVC开发依赖spring-webmvc, 且spring-webmvc是依赖spring-web的\n\n\n\nJavaWeb包(由于tomcat中有这些包, 所以scope需要设置为provided)\nServlet\nJSP\nJSTL\n\n\nJunit + spring-test\n\n123456789101112131415161718192021222324252627282930313233343536&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;junit&lt;/groupId&gt;        &lt;artifactId&gt;junit&lt;/artifactId&gt;        &lt;version&gt;3.8.1&lt;/version&gt;        &lt;scope&gt;test&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;        &lt;version&gt;4.0.1&lt;/version&gt;        &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;        &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;        &lt;version&gt;2.3.3&lt;/version&gt;        &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;        &lt;artifactId&gt;jstl&lt;/artifactId&gt;        &lt;version&gt;1.2&lt;/version&gt;        &lt;scope&gt;provided&lt;/scope&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\n\n配置maven-tomcat7-plugin插件\n不进行配置之后使用tomcat:run会出错, 这里需要使用tomcat7:run\n配置contextReloadable可实现热部署\n\n12345678910111213&lt;build&gt;    &lt;finalName&gt;springmvc01&lt;/finalName&gt;    &lt;plugins&gt;        &lt;plugin&gt;            &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;            &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;            &lt;version&gt;2.1&lt;/version&gt;            &lt;configuration&gt;                    &lt;contextReloadable&gt;true&lt;/contextReloadable&gt;            &lt;/configuration&gt;        &lt;/plugin&gt;    &lt;/plugins&gt;&lt;/build&gt;\n\n配置核心组件配置核心配置文件springmvc.xml\n开启包扫描\n&lt;mvc:default-servlet-handler/&gt;设置静态资源将不会被前段控制器拦截, 交给Web服务器进行处理\n\n123456789101112131415&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txmlns:context=\"http://www.springframework.org/schema/context\"\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\txsi:schemaLocation=\"http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context.xsd \"&gt;\t&lt;context:component-scan base-package=\"controller\"/&gt;\t&lt;mvc:annotation-driven/&gt;\t&lt;mvc:default-servlet-handler/&gt;&lt;/beans&gt;\n\nHandlerMapping和HandlerAdapter方式一: 分别配置12345678910111213141516&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txmlns:context=\"http://www.springframework.org/schema/context\"\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\txsi:schemaLocation=\"http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context.xsd \"&gt;\t&lt;context:component-scan base-package=\"controller\"/&gt;    &lt;mvc:default-servlet-handler/&gt;\t&lt;bean class=\"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter\"/&gt;\t&lt;bean class=\"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping\"/&gt;&lt;/beans&gt;\n\n方式二: 开启annotation-driven默认都进行了配置\n12345678910111213141516&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txmlns:context=\"http://www.springframework.org/schema/context\"\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\txsi:schemaLocation=\"http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context.xsd \"&gt;\t\t&lt;context:component-scan base-package=\"controller\"/&gt;\t&lt;mvc:annotation-driven/&gt;    &lt;mvc:default-servlet-handler/&gt;    &lt;/beans&gt;\n\n\n\n视图解析器\nprefix指定视图名称的前缀\nsuffix指定视图名称的后缀\n\n路径示意图\n\n\n12345678910111213141516171819&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txmlns:context=\"http://www.springframework.org/schema/context\"\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\txsi:schemaLocation=\"http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context.xsd \"&gt;\t&lt;context:component-scan base-package=\"controller\"/&gt;\t&lt;mvc:annotation-driven/&gt;\t&lt;mvc:default-servlet-handler/&gt;\t&lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\t\t&lt;property name=\"prefix\" value=\"/WEB-INF/views/\"/&gt;\t\t&lt;property name=\"suffix\" value=\".jsp\"/&gt;\t&lt;/bean&gt;&lt;/beans&gt;\n\n前端控制器DispatcherServlet前端控制器DispatcherServlet拦截路径\n\n*.action\n/  拦截所有(包括静态资源不包括jsp)\n/* 拦截所有(包括静态资源和jsp, 会导致跳转到jsp页面被拦截导致出错)\n\n123456789101112131415&lt;!DOCTYPE web-app PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\" \"http://java.sun.com/dtd/web-app_2_3.dtd\" &gt;&lt;servlet&gt;    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;    &lt;init-param&gt;        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;        &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;    &lt;/init-param&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt;    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;    &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;\n\n配置CharacterEncodingFilter解决POST乱码123456789101112&lt;filter&gt;    &lt;filter-name&gt;encoding&lt;/filter-name&gt;    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;    &lt;init-param&gt;        &lt;param-name&gt;encoding&lt;/param-name&gt;        &lt;param-value&gt;UTF-8&lt;/param-value&gt;    &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt;    &lt;filter-name&gt;encoding&lt;/filter-name&gt;    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;\n\nController编写12345678910111213141516171819202122232425262728293031323334353637package controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.servlet.ModelAndView;@Controllerpublic class MyController &#123;\t\t@RequestMapping(path=\"/index1\")\tpublic ModelAndView index() &#123;\t\tModelAndView mv = new ModelAndView();\t\tmv.addObject(\"message\", \"Index1\");\t\tmv.setViewName(\"index1\");\t\treturn mv;\t\t\t&#125;\t\t@RequestMapping(path=\"/index2\")\tpublic ModelAndView index2() &#123;\t\tModelAndView mv = new ModelAndView();\t\tmv.addObject(\"message\", \"Index2\");\t\tmv.setViewName(\"index2\");\t\treturn mv;\t\t\t&#125;\t\t@RequestMapping(path=\"/index3\")\tpublic ModelAndView index3() &#123;\t\tModelAndView mv = new ModelAndView();\t\tmv.addObject(\"message\", \"Index3\");\t\tmv.setViewName(\"index3\");\t\treturn mv;\t\t\t&#125;\t&#125;\n\nJSP编写1234567891011121314&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"    pageEncoding=\"UTF-8\"%&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=\"UTF-8\"&gt;&lt;title&gt;Insert title here&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\t&lt;div&gt;\t\t&lt;%= request.getAttribute(\"message\") %&gt;\t&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n\n测试\n","thumbnail":"/post/SpringMVC入门/cover.jpg","plink":"https://beginc.github.io/post/SpringMVC入门/"},{"title":"MyBatis整合Spring","date":"2019-08-24T04:38:49.000Z","updated":"2019-09-06T02:56:46.574Z","content":"创建Maven项目编译设置12345678910111213141516&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\t&lt;groupId&gt;cn.edu.njust&lt;/groupId&gt;\t&lt;artifactId&gt;mybatis01&lt;/artifactId&gt;\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\t&lt;name&gt;mybatis01&lt;/name&gt;\t&lt;description&gt;mybatis01&lt;/description&gt;\t&lt;properties&gt;\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\t\t&lt;maven.compiler.source&gt;12&lt;/maven.compiler.source&gt;\t\t&lt;maven.compiler.target&gt;12&lt;/maven.compiler.target&gt;\t&lt;/properties&gt;&lt;/project&gt;\n\n引入依赖\nMySQL驱动\nJUnit\nMyBatis\nSpring\nmybatis-spring整合包\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;mysql&lt;/groupId&gt;        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;        &lt;version&gt;8.0.17&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;junit&lt;/groupId&gt;        &lt;artifactId&gt;junit&lt;/artifactId&gt;        &lt;version&gt;4.10&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;        &lt;version&gt;3.2.7&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;        &lt;version&gt;1.3.2&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;        &lt;version&gt;1.2.2&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\n\n建立pojo对象Student\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package pojo;public class Student &#123;\tprivate int id;\tprivate String name;\tprivate CClass cclass;\tpublic Student() &#123;\t&#125;\tpublic Student(int id, String name, CClass cclass) &#123;\t\tsuper();\t\tthis.id = id;\t\tthis.name = name;\t\tthis.cclass = cclass;\t&#125;\t/**\t * @return the name\t */\tpublic String getName() &#123;\t\treturn name;\t&#125;\t/**\t * @param name the name to set\t */\tpublic void setName(String name) &#123;\t\tthis.name = name;\t&#125;\t/**\t * @return the cclass\t */\tpublic CClass getCclass() &#123;\t\treturn cclass;\t&#125;\t/**\t * @param cclass the cclass to set\t */\tpublic void setCclass(CClass cclass) &#123;\t\tthis.cclass = cclass;\t&#125;\t/**\t * \t * @return\t */\t@Override\tpublic String toString() &#123;\t\treturn \"Student [id=\" + id + \", name=\" + name + \", cclass=\" + cclass + \"]\";\t&#125;&#125;\n\nCClass\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package pojo;import java.util.List;public class CClass &#123;\tprivate int id;\tprivate String name;\tprivate List&lt;Student&gt; students;\tpublic CClass() &#123;\t&#125;\tpublic CClass(int id, String name, List&lt;Student&gt; students) &#123;\t\tsuper();\t\tthis.id = id;\t\tthis.name = name;\t\tthis.students = students;\t&#125;\t/**\t * @return the id\t */\tpublic int getId() &#123;\t\treturn id;\t&#125;\t/**\t * @param id the id to set\t */\tpublic void setId(int id) &#123;\t\tthis.id = id;\t&#125;\t/**\t * @return the name\t */\tpublic String getName() &#123;\t\treturn name;\t&#125;\t/**\t * @param name the name to set\t */\tpublic void setName(String name) &#123;\t\tthis.name = name;\t&#125;\t/**\t * @return the students\t */\tpublic List&lt;Student&gt; getStudents() &#123;\t\treturn students;\t&#125;\t/**\t * @param students the students to set\t */\tpublic void setStudents(List&lt;Student&gt; students) &#123;\t\tthis.students = students;\t&#125;\t/**\t * \t * @return\t */\t@Override\tpublic String toString() &#123;\t\treturn \"CClass [id=\" + id + \", name=\" + name + \", students=\" + students + \"]\";\t&#125;&#125;\n\n为pojo对象建立SqlMap配置文件Student.xml\n123456789101112131415161718192021&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"mapper.StudentMapper\"&gt;\t&lt;resultMap type=\"Student\" id=\"studentResultMap\"&gt;\t\t&lt;id column=\"sid\" property=\"id\"/&gt;\t\t&lt;result column=\"sname\" property=\"name\"/&gt;\t\t\t\t&lt;association property=\"cclass\" javaType=\"CClass\"&gt;\t\t\t&lt;id column=\"cid\" property=\"id\"/&gt;\t\t\t&lt;result column=\"cname\" property=\"name\"/&gt;\t\t&lt;/association&gt;\t&lt;/resultMap&gt;\t&lt;select id=\"findStudentById\" parameterType=\"Integer\" resultMap=\"studentResultMap\"&gt;\t\tselect student.id as sid, student.name as sname, age, class.id as cid, class.name as cname\t\tfrom student join class\t\ton student.classId = class.id\t\twhere student.id = #&#123;value&#125;\t&lt;/select&gt;&lt;/mapper&gt;\n\nCClass\n123456789101112131415161718192021&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"mapper.CClassMapper\"&gt;\t&lt;resultMap type=\"CClass\" id=\"cclassResultMap\"&gt;\t\t&lt;id column=\"cid\" property=\"id\"/&gt;\t\t&lt;result column=\"cname\" property=\"name\"/&gt;\t\t\t\t&lt;collection property=\"students\" ofType=\"Student\"&gt;\t\t\t&lt;id column=\"sid\" property=\"id\"/&gt;\t\t\t&lt;result column=\"sname\" property=\"name\"/&gt;\t\t&lt;/collection&gt;\t&lt;/resultMap&gt;\t&lt;select id=\"findCClassById\" parameterType=\"Integer\" resultMap=\"cclassResultMap\"&gt;\t\tselect class.id as cid, class.name as cname, student.id as sid, student.name as sname, age\t\tfrom student join class\t\ton student.classId = class.id\t\twhere class.id = #&#123;value&#125;\t&lt;/select&gt;&lt;/mapper&gt;\n\n配置SqlMapConfig.xml\n只需配置mappers\n\n1234567891011121314&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configurationPUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;\t&lt;typeAliases&gt;\t\t&lt;package name=\"pojo\"/&gt;\t&lt;/typeAliases&gt;\t\t&lt;mappers&gt;\t\t&lt;mapper resource=\"sqlmap/Student.xml\"/&gt;\t\t&lt;mapper resource=\"sqlmap/CClass.xml\"/&gt;\t&lt;/mappers&gt;&lt;/configuration&gt;\n\nDAO开发配置applicationContext.xml\ndataSource\nSqlSessionFactory\n注入dataSource\n注入SqlMapConfig.xml的位置\n\n\n\n123456789101112131415161718192021222324252627&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txmlns:context=\"http://www.springframework.org/schema/context\"\txmlns:aop=\"http://www.springframework.org/schema/aop\"\txmlns:tx=\"http://www.springframework.org/schema/tx\"\txsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\"&gt;    &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\t\t&lt;property name=\"driverClassName\" value=\"com.mysql.cj.jdbc.Driver\"/&gt;\t\t&lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/test?serverTimezone=UTC\"/&gt;\t\t&lt;property name=\"username\" value=\"root\"/&gt;\t\t&lt;property name=\"password\" value=\"Hgld521125\"/&gt;\t&lt;/bean&gt;\t\t&lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt;\t\t&lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\t\t&lt;property name=\"configLocation\" value=\"classpath:SqlMapConfig.xml\"/&gt;\t&lt;/bean&gt;&lt;/beans&gt;\n\nDAO + DAOImplStudentDAO\n1234567package dao;import pojo.Student;public interface StudentDAO &#123;\tpublic Student findStudentById(Integer id);&#125;\n\nStudentDAOImpl\n\n继承SqlSessionDaoSupport\n通过this.getSqlSession来获取SqlSession\nSpring管理SqlSessionFactory的时候不允许手动关闭session\n\n1234567891011121314151617package dao.impl;import org.apache.ibatis.session.SqlSession;import org.mybatis.spring.support.SqlSessionDaoSupport;import dao.StudentDAO;import pojo.Student;public class StudentDAOImpl extends SqlSessionDaoSupport implements StudentDAO &#123;\tpublic Student findStudentById(Integer id) &#123;\t\tSqlSession session = this.getSqlSession();\t\tStudent student = session.selectOne(\"findStudentById\", 1);\t\t// session.close();\t\treturn student;\t&#125;&#125;\n\n为StudentDAOImpl注入SqlSessionFacotry\n123&lt;bean id=\"studentDAO\" class=\"dao.impl.StudentDAOImpl\"&gt;    &lt;property name=\"sqlSessionFactory\" ref=\"sqlSessionFactory\"/&gt;&lt;/bean&gt;\n\n编写测试123456789101112@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(\"classpath:applicationContext.xml\")public class Test01 &#123;\t@Resource(name = \"studentDAO\")\tprivate StudentDAO studentDAO;\t@Test\tpublic void test01() &#123;\t\tStudent student = this.studentDAO.findStudentById(1);\t\tSystem.out.println(student);\t&#125;&#125;\n\nMapper动态代理开发建立mapper1234567package mapper;import pojo.CClass;public interface CClassMapper &#123;\tpublic CClass findCClassById(Integer id);&#125;\n\n配置applicationContext.xml同\n方式一: MapperFactoryBean\n该工厂负责生产动态代理产生的mapper\n注入sqlSessionFactory\n注入mapperInterface\n\n1234&lt;bean id=\"cclassMapper\" class=\"org.mybatis.spring.mapper.MapperFactoryBean\"&gt;    &lt;property name=\"sqlSessionFactory\" ref=\"sqlSessionFactory\"/&gt;    &lt;property name=\"mapperInterface\" value=\"mapper.CClassMapper\"/&gt;&lt;/bean&gt;\n\n编写测试\n1234567891011@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(\"classpath:applicationContext.xml\")public class Test01 &#123;\t@Resource(name = \"cclassMapper\")\tprivate CClassMapper mapper;\t@Test\tpublic void test02() &#123;\t\tSystem.out.println(mapper.findCClassById(1));\t&#125;&#125;\n\n方式二: MapperScannerConfigurer\n自动注入sqlSessionFactory\n自动扫描包(及其子包)管理mapper(无需手动为每个mapper配置MapperFactoryBean)\n无需设置id, 直接用mapper名.class在context中获取mapper\n\n123&lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;\t&lt;property name=\"basePackage\" value=\"mapper\" /&gt;&lt;/bean&gt;\n\n编写测试\n\n开启自动扫描, 无法通过name注入mapper, 必须通过context.getBean(CClassMapper.class)获取mapper或者使用@Autowired按类型注入mapper\n\n1234567891011@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(\"classpath:applicationContext.xml\")public class Test01 &#123;\t@Autowired\tprivate CClassMapper mapper;\t@Test\tpublic void test02() &#123;\t\tSystem.out.println(mapper.findCClassById(1));\t&#125;&#125;\n\n","thumbnail":"/post/MyBatis整合Spring/cover.jpg","plink":"https://beginc.github.io/post/MyBatis整合Spring/"},{"title":"MyBatis关联查询","date":"2019-08-24T01:58:29.000Z","updated":"2019-08-29T15:11:02.000Z","content":"环境搭建详见MyBatis入门\n\n创建Maven项目\n引入依赖\n配置SqlMapConfig.xml\n建立pojo对象\n为pojo对象建立SqlMap配置文件\n\nStudent\n\n用CClass对象表示与CClass的一对一关联\n\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556package pojo;public class Student &#123;\tprivate int id;\tprivate String name;\tprivate CClass cclass;\tpublic Student() &#123;\t&#125;\tpublic Student(int id, String name, CClass cclass) &#123;\t\tsuper();\t\tthis.id = id;\t\tthis.name = name;\t\tthis.cclass = cclass;\t&#125;\t/**\t * @return the name\t */\tpublic String getName() &#123;\t\treturn name;\t&#125;\t/**\t * @param name the name to set\t */\tpublic void setName(String name) &#123;\t\tthis.name = name;\t&#125;\t/**\t * @return the cclass\t */\tpublic CClass getCclass() &#123;\t\treturn cclass;\t&#125;\t/**\t * @param cclass the cclass to set\t */\tpublic void setCclass(CClass cclass) &#123;\t\tthis.cclass = cclass;\t&#125;\t/**\t * \t * @return\t */\t@Override\tpublic String toString() &#123;\t\treturn \"Student [id=\" + id + \", name=\" + name + \", cclass=\" + cclass + \"]\";\t&#125;&#125;\n\nCClass\n\n用List&lt;Student&gt; students来表示与学生的一对多关联\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172package pojo;import java.util.List;public class CClass &#123;\tprivate int id;\tprivate String name;\tprivate List&lt;Student&gt; students;\tpublic CClass() &#123;\t&#125;\tpublic CClass(int id, String name, List&lt;Student&gt; students) &#123;\t\tsuper();\t\tthis.id = id;\t\tthis.name = name;\t\tthis.students = students;\t&#125;\t/**\t * @return the id\t */\tpublic int getId() &#123;\t\treturn id;\t&#125;\t/**\t * @param id the id to set\t */\tpublic void setId(int id) &#123;\t\tthis.id = id;\t&#125;\t/**\t * @return the name\t */\tpublic String getName() &#123;\t\treturn name;\t&#125;\t/**\t * @param name the name to set\t */\tpublic void setName(String name) &#123;\t\tthis.name = name;\t&#125;\t/**\t * @return the students\t */\tpublic List&lt;Student&gt; getStudents() &#123;\t\treturn students;\t&#125;\t/**\t * @param students the students to set\t */\tpublic void setStudents(List&lt;Student&gt; students) &#123;\t\tthis.students = students;\t&#125;\t/**\t * \t * @return\t */\t@Override\tpublic String toString() &#123;\t\treturn \"CClass [id=\" + id + \", name=\" + name + \", students=\" + students + \"]\";\t&#125;&#125;\n\n一对一关联查询需求\n根据id查询学生, 并查询出其班级信息\n\n编写SqlMap.xml\n返回值应该用resultMap进行映射\nassociation指定一对一映射两者都需要指定自己的id`\nassociation中的property指的是该CClass在Student对象中属性的名称\nassociation中的javaType指的是关联的对象的类型\n\n123456789101112131415&lt;resultMap type=\"Student\" id=\"studentResultMap\"&gt;    &lt;id column=\"sid\" property=\"id\"/&gt;    &lt;result column=\"sname\" property=\"name\"/&gt;        &lt;association property=\"cclass\" javaType=\"CClass\"&gt;        &lt;id column=\"cid\" property=\"id\"/&gt;        &lt;result column=\"cname\" property=\"name\"/&gt;    &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=\"findById\" parameterType=\"Integer\" resultMap=\"studentResultMap\"&gt;    select student.id as sid, student.name as sname, age, class.id as cid, class.name as cname    from student join class    on student.classId = class.id    where student.id = #&#123;value&#125;&lt;/select&gt;\n\n编写测试1234567@Testpublic void test01() &#123;    SqlSession session = this.factory.openSession();    Student student = session.selectOne(\"findById\", 1);    System.out.println(student);    session.close();&#125;\n\n一对多测试需求\n根据id查询班级, 并查询出班级所有的学生\n\n编写SqlMap.xml\n返回值应该用resultMap进行映射\ncollection指定一对多映射两者都需要指定自己的id`\ncollection中的property指的是该Student集合在CClass对象中属性的名称\ncollection中的ofType指的是关联的对象集合的泛型\n\n123456789101112131415&lt;resultMap type=\"CClass\" id=\"cclassResultMap\"&gt;    &lt;id column=\"cid\" property=\"id\"/&gt;    &lt;result column=\"cname\" property=\"name\"/&gt;        &lt;collection property=\"students\" ofType=\"Student\"&gt;        &lt;id column=\"sid\" property=\"id\"/&gt;        &lt;result column=\"sname\" property=\"name\"/&gt;    &lt;/collection&gt;&lt;/resultMap&gt;&lt;select id=\"findCClassById\" parameterType=\"Integer\" resultMap=\"cclassResultMap\"&gt;    select class.id as cid, class.name as cname, student.id as sid, student.name as sname, age    from student join class    on student.classId = class.id    where class.id = #&#123;value&#125;&lt;/select&gt;\n\n编写测试1234567@Testpublic void test02() &#123;    SqlSession session = this.factory.openSession();    CClass cclass = session.selectOne(\"findCClassById\", 1);    System.out.println(cclass);    session.close();&#125;","thumbnail":"/post/MyBatis关联查询/cover.jpg","plink":"https://beginc.github.io/post/MyBatis关联查询/"},{"title":"MyBatis动态SQL","date":"2019-08-24T01:12:43.000Z","updated":"2019-08-29T15:11:12.000Z","content":"环境搭建详见MyBatis入门\n\n创建Maven项目\n引入依赖\n配置SqlMapConfig.xml\n建立pojo对象\n为pojo对象建立SqlMap配置文件\n\nIf-Where标签需求\n根据名字和年龄查询用户\n\n编写SqlMap文件\n用If来判断name和age是否存在, 仅当存在时才作为查询条件\nWhere可用于处理条件语句, 还可以去掉前导and(当只有age做条件时, 需要去掉前面的and)\n\n1234567891011&lt;select id=\"findByNameAndAge\" parameterType=\"User\" resultType=\"User\"&gt;    select * from user    &lt;where&gt;        &lt;if test=\"name != null and name != ''\"&gt;            name = #&#123;name&#125;        &lt;/if&gt;        &lt;if test=\"age != null\"&gt;            and age = #&#123;age&#125;        &lt;/if&gt;    &lt;/where&gt;&lt;/select&gt;\n\n编写测试1234567891011121314151617181920212223242526272829303132333435363738394041@Testpublic void test01() &#123;    SqlSession session = this.factory.openSession();    User query;    List&lt;User&gt; users;        // 两个条件都有    query = new User();    query.setName(\"Rylynn\");    query.setAge(18);    users = session.selectList(\"findByNameAndAge\", query);    for (User user : users) &#123;        System.out.println(user);    &#125;    System.out.println();        // 只有名字    query = new User();    query.setName(\"Bob\");    users = session.selectList(\"findByNameAndAge\", query);    for (User user : users) &#123;        System.out.println(user);    &#125;    System.out.println();        // 只有年龄    query = new User();    query.setAge(1);    users = session.selectList(\"findByNameAndAge\", query);    for (User user : users) &#123;        System.out.println(user);    &#125;        // 都没有    query = new User();    users = session.selectList(\"findByNameAndAge\", query);    for (User user : users) &#123;        System.out.println(user);    &#125;    session.close();&#125;\n\nForEach标签需求\n给定一串id, 查找id在其中的用户(不定数量的id)\n\n编写SqlMap文件\ncollection指定要遍历的数组或集合\nitem指定取出的元素名\nopen指定前缀\nclose指定后缀\nseperator指定分隔符\n\n数组\n数组类型可写为iterator\n传数组时, 名字必须为array\n\n123456&lt;select id=\"findByIdsArray\" parameterType=\"iterator\" resultType=\"User\"&gt;    select * from user where id in    &lt;foreach collection=\"array\" item=\"id\" open=\"(\" close=\")\" separator=\",\"&gt;        #&#123;id&#125;    &lt;/foreach&gt;&lt;/select&gt;\n\nList\nList类型可写成list\n传List时, 名字必须为list\n\n123456&lt;select id=\"findByIdsList\" parameterType=\"list\" resultType=\"User\"&gt;    select * from user where id in    &lt;foreach collection=\"list\" item=\"id\" open=\"(\" close=\")\" separator=\",\"&gt;        #&#123;id&#125;    &lt;/foreach&gt;&lt;/select&gt;\n\n测试样例\n12345678910111213@Testpublic void test03() &#123;    SqlSession session = this.factory.openSession();    ArrayList&lt;Integer&gt; ids = new ArrayList&lt;Integer&gt;();    ids.add(11);    ids.add(6);    ids.add(7);    List&lt;User&gt; users = session.selectList(\"findByIdsList\", ids);    for (User user : users) &#123;        System.out.println(user);    &#125;    session.close();&#125;\n\nSQL片段\n可用于提取常用的一些SQL片段\n\n123456789&lt;sql id=\"selectAllUser\"&gt;    select * from user&lt;/sql&gt;&lt;select id=\"findByIdsList\" parameterType=\"list\" resultType=\"User\"&gt;    &lt;include refid=\"selectAllUser\"/&gt; where id in    &lt;foreach collection=\"list\" item=\"id\" open=\"(\" close=\")\" separator=\",\"&gt;        #&#123;id&#125;    &lt;/foreach&gt;&lt;/select&gt;","thumbnail":"/post/MyBatis动态SQL/cover.jpg","plink":"https://beginc.github.io/post/MyBatis动态SQL/"},{"title":"MyBatis动态代理开发","date":"2019-08-23T15:52:46.000Z","updated":"2019-08-29T15:11:14.000Z","content":"环境搭建详见MyBatis入门\n\n创建Maven项目\n引入依赖\n配置SqlMapConfig.xml\n建立pojo对象\n为pojo对象建立SqlMap配置文件\n\nMyBatis动态代理开发规范\nmapper方法名与SqlMap文件中对应statement的id一致\nmapper返回值类型与SqlMap文件中对应statement的返回类型一致\nmapper参数类型与SqlMap文件中对应statement的参数类型一致\nSqlMap中namespace必须为Mapper接口的全称\n\n建立UserMapper新建包mapper, 建立UserMapper接口\n1234567891011public interface UserMapper &#123;\tpublic User findById(Integer id);\tpublic List&lt;User&gt; findByName(String name);\tpublic void insertUser(User user);\tpublic void updateUser(User user);\tpublic void deleteUser(Integer id);&#125;\n\n修改User.xml中的namespace123456789101112131415161718192021222324&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"mapper.UserMapper\"&gt;\t&lt;select id=\"findById\" parameterType=\"Integer\" resultType=\"pojo.User\"&gt;\t\tselect * from user where id = #&#123;value&#125;\t&lt;/select&gt;\t&lt;select id=\"findByName\" parameterType=\"String\" resultType=\"pojo.User\"&gt;\t\tselect * from user where name like '%$&#123;value&#125;%'\t&lt;/select&gt;\t&lt;insert id=\"insertUser\" parameterType=\"pojo.User\"&gt;\t\t&lt;selectKey keyProperty=\"id\" order=\"AFTER\" resultType=\"Integer\"&gt;\t\t\tselect LAST_INSERT_ID()\t\t&lt;/selectKey&gt;\t\tinsert into user (name, age) values (#&#123;name&#125;, #&#123;age&#125;)\t&lt;/insert&gt;\t&lt;update id=\"updateUser\" parameterType=\"pojo.User\"&gt;\t\tupdate user set name=#&#123;name&#125;, age=#&#123;age&#125; where id=#&#123;id&#125;\t&lt;/update&gt;\t&lt;delete id=\"deleteUser\" parameterType=\"Integer\"&gt;\t\tdelete from user where id=#&#123;value&#125;\t&lt;/delete&gt;&lt;/mapper&gt;\n\n编写测试\n通过SqlSession获取Mapper\n调用Mapper的方法\n\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465public class Test02 &#123;\tprivate SqlSessionFactory factory;\t\t@Before\tpublic void setUp() throws IOException &#123;\t\tthis.factory = new SqlSessionFactoryBuilder().build(Resources.getResourceAsStream(\"SqlMapConfig.xml\"));\t&#125;\t\t@Test\tpublic void test01() &#123;\t\tSqlSession session = this.factory.openSession();\t\tUserMapper mapper = session.getMapper(UserMapper.class);\t\t\t\tUser user = mapper.findById(7);\t\tSystem.out.println(user);\t\tsession.close();\t&#125;\t@Test\tpublic void test02() &#123;\t\tSqlSession session = this.factory.openSession();\t\tUserMapper mapper = session.getMapper(UserMapper.class);\t\tList&lt;User&gt; users = mapper.findByName(\"Rylynn\");\t\tfor (User user : users) &#123;\t\t\tSystem.out.println(user);\t\t&#125;\t\tsession.close();\t&#125;\t\t@Test\tpublic void test03() &#123;\t\tSqlSession session = this.factory.openSession();\t\tUserMapper mapper = session.getMapper(UserMapper.class);\t\tUser user = new User();\t\tuser.setName(\"BCD\");\t\tuser.setAge(50);\t\tmapper.insertUser(user);\t\tSystem.out.println(user);\t\tsession.commit();\t\tsession.close();\t&#125;\t\t@Test\tpublic void test04() &#123;\t\tSqlSession session = this.factory.openSession();\t\tUserMapper mapper = session.getMapper(UserMapper.class);\t\tUser user = new User();\t\tuser.setId(5);\t\tuser.setName(\"BCD\");\t\tuser.setAge(57);\t\tmapper.updateUser(user);\t\tsession.commit();\t\tsession.close();\t&#125;\t\t@Test\tpublic void test05() &#123;\t\tSqlSession session = this.factory.openSession();\t\tUserMapper mapper = session.getMapper(UserMapper.class);\t\tmapper.deleteUser(8);\t\tsession.commit();\t\tsession.close();\t&#125;&#125;\n\n","thumbnail":"/post/MyBatis动态代理开发/cover.jpg","plink":"https://beginc.github.io/post/MyBatis动态代理开发/"},{"title":"MyBatis入门","date":"2019-08-23T13:49:25.000Z","updated":"2019-08-28T16:41:16.000Z","content":"创建Maven项目编译设置12345678910111213141516&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\t&lt;groupId&gt;cn.edu.njust&lt;/groupId&gt;\t&lt;artifactId&gt;mybatis01&lt;/artifactId&gt;\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\t&lt;name&gt;mybatis01&lt;/name&gt;\t&lt;description&gt;mybatis01&lt;/description&gt;\t&lt;properties&gt;\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\t\t&lt;maven.compiler.source&gt;12&lt;/maven.compiler.source&gt;\t\t&lt;maven.compiler.target&gt;12&lt;/maven.compiler.target&gt;\t&lt;/properties&gt;&lt;/project&gt;\n\n引入依赖\nMySQL驱动\nJUnit\nMyBatis\n\n1234567891011121314151617&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;mysql&lt;/groupId&gt;        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;        &lt;version&gt;8.0.17&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;        &lt;version&gt;3.2.7&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;junit&lt;/groupId&gt;        &lt;artifactId&gt;junit&lt;/artifactId&gt;        &lt;version&gt;4.10&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\n\n配置SqlMapConfig.xml在src/main/resource下建立SqlMapConfig.xml配置文件, 配置数据源和事务管理器\n1234567891011121314151617&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configurationPUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;\t&lt;environments default=\"dev\"&gt;\t\t&lt;environment id=\"dev\"&gt;\t\t\t&lt;transactionManager type=\"JDBC\"/&gt;\t\t\t&lt;dataSource type=\"POOLED\"&gt;\t\t\t\t&lt;property name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/&gt;\t\t\t\t&lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/test?serverTimezone=UTC\"/&gt;\t\t\t\t&lt;property name=\"username\" value=\"root\"/&gt;\t\t\t\t&lt;property name=\"password\" value=\"Hgld51125\"/&gt;\t\t\t&lt;/dataSource&gt;\t\t&lt;/environment&gt;\t&lt;/environments&gt;&lt;/configuration&gt;\n\n建立pojo对象必须提供一个无参数的构造方法\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package pojo;public class User &#123;\tprivate int id;\tprivate String name;\tprivate int age;\t\tpublic User() &#123;\t\t\t&#125;\tpublic User(int id, String name, int age) &#123;\t\tsuper();\t\tthis.id = id;\t\tthis.name = name;\t\tthis.age = age;\t&#125;\t/**\t * @return the id\t */\tpublic int getId() &#123;\t\treturn id;\t&#125;\t/**\t * @param id the id to set\t */\tpublic void setId(int id) &#123;\t\tthis.id = id;\t&#125;\t/**\t * @return the name\t */\tpublic String getName() &#123;\t\treturn name;\t&#125;\t/**\t * @param name the name to set\t */\tpublic void setName(String name) &#123;\t\tthis.name = name;\t&#125;\t/**\t * @return the age\t */\tpublic int getAge() &#123;\t\treturn age;\t&#125;\t/**\t * @param age the age to set\t */\tpublic void setAge(int age) &#123;\t\tthis.age = age;\t&#125;\t/**\t * \t * @return\t */\t@Override\tpublic String toString() &#123;\t\treturn \"User [id=\" + id + \", name=\" + name + \", age=\" + age + \"]\";\t&#125;&#125;\n\n为pojo对象建立SqlMap配置文件在src/main/resource下建立一个sqlmap文件夹, 建立User.xml\n1234567&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"User\"&gt;&lt;/mapper&gt;\n\n在SqlMapConfig.xml中引用该SqlMap文件\n123456789101112131415161718192021&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configurationPUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt;\t&lt;environments default=\"dev\"&gt;\t\t&lt;environment id=\"dev\"&gt;\t\t\t&lt;transactionManager type=\"JDBC\"/&gt;\t\t\t&lt;dataSource type=\"POOLED\"&gt;\t\t\t\t&lt;property name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/&gt;\t\t\t\t&lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/test?serverTimezone=UTC\"/&gt;\t\t\t\t&lt;property name=\"username\" value=\"root\"/&gt;\t\t\t\t&lt;property name=\"password\" value=\"Hgld521125\"/&gt;\t\t\t&lt;/dataSource&gt;\t\t&lt;/environment&gt;\t&lt;/environments&gt;\t\t&lt;mappers&gt;\t\t&lt;mapper resource=\"sqlmap/User.xml\"/&gt;\t&lt;/mappers&gt;&lt;/configuration&gt;\n\n实现基本需求查询单个User编写SqlMap\nid标识该语句\nparameterType指定了参数类型\nresultType指定了返回值类型\n#{value}引用参数, 此处value可为任意名称\n\n123456789&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"User\"&gt;\t&lt;select id=\"findById\" parameterType=\"Integer\" resultType=\"pojo.User\"&gt;\t\tselect * from user where id = #&#123;value&#125;\t&lt;/select&gt;&lt;/mapper&gt;\n\n此处使用resultType指定返回类型， 需保证数据库字段名和pojo属性名一致, 否则应使用resultMap\n1234567891011121314&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"User\"&gt;\t&lt;resultMap type=\"User\" id=\"userMap\"&gt;\t\t&lt;id column=\"id\" property=\"id\"/&gt;\t\t&lt;result column=\"name\" property=\"name\"/&gt;\t\t&lt;result column=\"age\" property=\"age\"/&gt;\t&lt;/resultMap&gt;\t&lt;select id=\"findById\" parameterType=\"Integer\" resultMap=\"userMap\"&gt;\t\tselect * from user where id = #&#123;value&#125;\t&lt;/select&gt;&lt;/mapper&gt;\n\n编写测试\n由于src/main/resource目录下的文件最终会在src下, 所以可直接读取SqlMapConfig.xml\n\n12345678910111213141516public class Test01 &#123;\tprivate SqlSessionFactory factory;\t\t@Before\tpublic void setUp() throws IOException &#123;\t\tthis.factory = new SqlSessionFactoryBuilder().build(Resources.getResourceAsStream(\"SqlMapConfig.xml\"));\t&#125;\t\t@Test\tpublic void test01() &#123;\t\tSqlSession session = this.factory.openSession();\t\tUser user = session.selectOne(\"findById\", 5);\t\tSystem.out.println(user);\t\tsession.close();\t&#125;&#125;\n\n模糊查询多个User编写SqlMap\n${}用于单纯的字符串拼接(字符串两边不会加’)\n${}对于基本类型, 必须填value!!\n\n123&lt;select id=\"findByName\" parameterType=\"String\" resultType=\"pojo.User\"&gt;    select * from user where name like '%$&#123;value&#125;%'&lt;/select&gt;\n\n编写测试123456789@Testpublic void test02() &#123;    SqlSession session = this.factory.openSession();    List&lt;User&gt; users = session.selectList(\"findByName\", \"Rylynn\");    for (User user : users) &#123;        System.out.println(user);    &#125;    session.close();&#125;\n\n添加User编写SqlMap\n传入参数类型为User\n无返回参数(session.insert会返回一个int)\n用#{name}这样的ognl表达式从入参中解析属性\nselectKey用于插入数据后将生成的key填充到入参中\nkeyProperty指定User为主键的属性\norder指定key是在数据保存前生成的还是保存后生成的\nMySQL AFTER\nOracle BEFORE\n\n\nresultType指定selectKey的返回值类型\n\n123456&lt;insert id=\"insertUser\" parameterType=\"pojo.User\"&gt;    &lt;selectKey keyProperty=\"id\" order=\"AFTER\" resultType=\"Integer\"&gt;        select LAST_INSERT_ID()    &lt;/selectKey&gt;    insert into user (name, age) values (#&#123;name&#125;, #&#123;age&#125;)&lt;/insert&gt;\n\n编写测试\n默认需要手动提交事务session.commit()\n\n1234567891011@Testpublic void test03() &#123;    SqlSession session = this.factory.openSession();    User user = new User();    user.setName(\"BCD\");    user.setAge(50);    session.insert(\"insertUser\", user);    System.out.println(user);    session.commit();    session.close();&#125;\n\n更新User编写SqlMap123&lt;update id=\"updateUser\" parameterType=\"pojo.User\"&gt;    update user set name=#&#123;name&#125;, age=#&#123;age&#125; where id=#&#123;id&#125;&lt;/update&gt;\n\n编写测试\n默认需要手动提交事务session.commit()\n\n1234567891011@Testpublic void test04() &#123;    SqlSession session = this.factory.openSession();    User user = new User();    user.setId(5);    user.setName(\"BCD\");    user.setAge(57);    session.update(\"updateUser\", user);    session.commit();    session.close();&#125;\n\n删除User编写SqlMap123&lt;delete id=\"deleteUser\" parameterType=\"Integer\"&gt;    delete from user where id=#&#123;value&#125;&lt;/delete&gt;\n\n编写测试\n默认需要手动提交事务session.commit()\n\n1234567@Testpublic void test05() &#123;    SqlSession session = this.factory.openSession();    session.delete(\"deleteUser\", 5);    session.commit();    session.close();&#125;\n\n","thumbnail":"/post/MyBatis入门/cover.jpg","plink":"https://beginc.github.io/post/MyBatis入门/"}]