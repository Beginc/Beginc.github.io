{"title":"Java日志框架","date":"2019-08-28T14:26:52.000Z","thumbnail":"/post/Java日志框架/cover.jpg","link":"post/Java日志框架","tags":["Logging"],"categories":["Java"],"updated":"2019-09-07T14:04:34.456Z","content":"<h1 id=\"Java日志框架分类\">Java日志框架分类<a href=\"post/Java日志框架#Java日志框架分类\"></a></h1><h2 id=\"日志实现框架\">日志实现框架<a href=\"post/Java日志框架#日志实现框架\"></a></h2><p>实现具体的记录日志的操作的框架</p>\n<ul>\n<li><code>log4j</code></li>\n<li><code>logback</code></li>\n<li>其他</li>\n</ul>\n<h2 id=\"日志门面框架\">日志门面框架<a href=\"post/Java日志框架#日志门面框架\"></a></h2><p>主要用于适配各种不同的底层日志实现框架，提供统一访问的API，充当门面</p>\n<ul>\n<li><code>slf4j</code></li>\n<li><code>commons-logging</code></li>\n</ul>\n<h1 id=\"SLF4J\">SLF4J<a href=\"post/Java日志框架#SLF4J\"></a></h1><h2 id=\"包介绍\">包介绍<a href=\"post/Java日志框架#包介绍\"></a></h2><ul>\n<li><code>slf4j-api-1.7.27.jar</code>核心包，只要使用<code>slf4j</code>则必须引入</li>\n<li><code>slf4j-log4j12-1.7.27.jar</code>绑定<code>log4j</code>1.2版本的包</li>\n<li><code>slf4j-jdk14-1.7.27.jar</code>绑定使用<code>java.util.logging</code>的包</li>\n<li><code>slf4j-nop-1.7.27.jar</code>不进行任何日志操作</li>\n<li><code>slf4j-simple-1.7.27.jar</code>使用简单的日志框架实现的包</li>\n<li><code>slf4j-jcl-1.7.27.jar</code>绑定使用<code>Jakarta Commons Logging</code>的包</li>\n<li><code>logback-classic-1.2.3.jar</code>绑定使用<code>logback</code>的包</li>\n</ul>\n<h2 id=\"绑定具体日志框架\">绑定具体日志框架<a href=\"post/Java日志框架#绑定具体日志框架\"></a></h2><ul>\n<li>引入<code>slf4j-api-1.7.27.jar</code></li>\n<li>引入日志框架的包</li>\n<li>引入对应的绑定日志框架的包</li>\n</ul>\n<h2 id=\"使用\">使用<a href=\"post/Java日志框架#使用\"></a></h2><ul>\n<li></li>\n<li><code>LoggerFactory.getLogger(logger名字)</code></li>\n<li><code>logger.trace()</code></li>\n<li><code>logger.debug()</code></li>\n<li><code>logger.info()</code></li>\n<li><code>logger.warn()</code></li>\n<li><code>logger.error()</code></li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestLog</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test01</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Logger logger = LoggerFactory.getLogger(<span class=\"string\">\"test\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        logger.trace(<span class=\"string\">\"From slf4j, from class &#123;&#125;\"</span>, getClass().getName());</span><br><span class=\"line\">        logger.debug(<span class=\"string\">\"From slf4j, from class &#123;&#125;\"</span>, getClass().getName());</span><br><span class=\"line\">        logger.info(<span class=\"string\">\"From slf4j, from class &#123;&#125;\"</span>, getClass().getName());</span><br><span class=\"line\">        logger.warn(<span class=\"string\">\"From slf4j, from class &#123;&#125;\"</span>, getClass().getName());</span><br><span class=\"line\">        logger.error(<span class=\"string\">\"From slf4j, from class &#123;&#125;\"</span>, getClass().getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"Logback\">Logback<a href=\"post/Java日志框架#Logback\"></a></h1><h2 id=\"包介绍-1\">包介绍<a href=\"post/Java日志框架#包介绍-1\"></a></h2><ul>\n<li><code>logback-core.jar</code>基础核心包</li>\n<li><code>logback-classic.jar</code>对<code>slf4j</code> API的直接实现</li>\n<li><code>logback-access.jar</code>实现在HTTP环境中进行日志</li>\n</ul>\n<h2 id=\"Logger-Context\">Logger Context<a href=\"post/Java日志框架#Logger-Context\"></a></h2><p>负责生产<code>logger</code>，并将所有<code>logger</code>组织成一个树的层次</p>\n<ul>\n<li><code>com.foo</code>是<code>com.foo.Bar</code>的<code>parent logger</code>(用 . 来表示继承关系)</li>\n</ul>\n<h2 id=\"日志级别\">日志级别<a href=\"post/Java日志框架#日志级别\"></a></h2><h3 id=\"基本日志级别\">基本日志级别<a href=\"post/Java日志框架#基本日志级别\"></a></h3><ul>\n<li><code>TRACE</code></li>\n<li><code>DEBUG</code></li>\n<li><code>INFO</code></li>\n<li><code>WARN</code></li>\n<li><code>ERROR</code></li>\n<li><code>OFF</code>关闭日志</li>\n</ul>\n<h3 id=\"日志级别继承\">日志级别继承<a href=\"post/Java日志框架#日志级别继承\"></a></h3><p>若一个<code>logger</code>没有设置日志级别，则它会从离它最近的继承层次上的<code>parent logger</code>继承日志级别</p>\n<img src=\"/post/Java日志框架/1.png\" class=\"article-img\">\n<img src=\"/post/Java日志框架/2.png\" class=\"article-img\">\n\n<h2 id=\"Appender\">Appender<a href=\"post/Java日志框架#Appender\"></a></h2><p>负责将日志输出到具体的目的地</p>\n<h2 id=\"Appender的加性性质\"><code>Appender</code>的加性性质<a href=\"post/Java日志框架#Appender的加性性质\"></a></h2><p>若一个<code>logger</code>的<code>additivity flag</code>被设置为<code>true</code>，则它的祖先<code>logger</code>的<code>Appender</code>都会作用在它上</p>\n<img src=\"/post/Java日志框架/3.png\" class=\"article-img\">\n\n<h2 id=\"常用Appender\">常用Appender<a href=\"post/Java日志框架#常用Appender\"></a></h2><h3 id=\"ConsoleAppender\">ConsoleAppender<a href=\"post/Java日志框架#ConsoleAppender\"></a></h3><p>输出到控制台</p>\n<ul>\n<li><code>target</code>目的地，为<code>System.out</code>或<code>System.err</code></li>\n</ul>\n<h3 id=\"FileAppender\">FileAppender<a href=\"post/Java日志框架#FileAppender\"></a></h3><p>输出到文件</p>\n<ul>\n<li><code>file</code>文件名</li>\n</ul>\n<h3 id=\"RollingFileAppender-TODO\">RollingFileAppender(TODO)<a href=\"post/Java日志框架#RollingFileAppender-TODO\"></a></h3><p>继承与<code>FileAppender</code>，日志达到一定数量时会将输出文件换到另一个</p>\n<ul>\n<li><code>file</code>文件名</li>\n<li><code>rollingPolicy</code></li>\n<li><code>triggeringPolicy</code>指定何时触发滚动</li>\n</ul>\n<h2 id=\"配置\">配置<a href=\"post/Java日志框架#配置\"></a></h2><h3 id=\"找配置文件的步骤\">找配置文件的步骤<a href=\"post/Java日志框架#找配置文件的步骤\"></a></h3><ol>\n<li>找<code>clasapath:logback-test.xml</code></li>\n<li>找<code>clasapath:logback.groovy</code></li>\n<li>找<code>clasapath:logback.xml</code></li>\n<li>找<code>META-INF\\services\\ch.qos.logback.classic.spi</code>中指定的类(ServiceProvider)</li>\n<li>使用<code>BasicConfigurator</code>进行基本配置，默认输出到控制台</li>\n</ol>\n<h3 id=\"基本配置\">基本配置<a href=\"post/Java日志框架#基本配置\"></a></h3><figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"STDOUT\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.ConsoleAppender\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;][%thread]][%-5level][%logger&#123;36&#125;]: %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"mylogger\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"INFO\"</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">\"DEBUG\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"STDOUT\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"详细配置\">详细配置<a href=\"post/Java日志框架#详细配置\"></a></h3><p><strong>Status Data</strong></p>\n<ul>\n<li><code>debug=&quot;true&quot;</code>，会自动打印出状态信息(如找配置文件的步骤)</li>\n</ul>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"STDOUT\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.ConsoleAppender\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;][%thread]][%-5level][%logger&#123;36&#125;]: %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"mylogger\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"INFO\"</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">\"DEBUG\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"STDOUT\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p><strong>logger</strong></p>\n<ul>\n<li><code>name</code></li>\n<li><code>level</code></li>\n<li><code>additivity</code>设置<code>Appender</code>加性</li>\n</ul>\n<p><strong>appender</strong></p>\n<ul>\n<li><code>name</code></li>\n<li><code>class</code></li>\n<li><code>encoder</code></li>\n<li><code>任意自身属性</code></li>\n</ul>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FILE\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.FileAppender\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">        log.txt</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;][%thread]][%-5level][%logger&#123;36&#125;]: %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p><strong>property</strong><br>用来定义一些变量</p>\n<ul>\n<li><code>name</code>属性名</li>\n<li><code>value</code>属性值</li>\n<li><code>file</code>引入<code>properties</code>文件</li>\n<li><code>scope</code><ul>\n<li><code>local</code>只在初始化配置阶段可用</li>\n<li><code>context</code>在整个<code>LoggerContext</code>存在期间都可用</li>\n<li><code>system</code>插入<code>JVM&#39;s system properties</code>只要<code>JVM</code>存在就能访问</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"USER_HOME\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"/home/sebastien\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">file</span>=<span class=\"string\">\"src/main/java/chapters/configuration/variables1.properties\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FILE\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.FileAppender\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>$&#123;USER_HOME&#125;/myApp.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>%msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">\"debug\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"FILE\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n<p>获取<code>context variable</code></p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Logger logger = LoggerFactory.getLogger(<span class=\"string\">\"test\"</span>);</span><br><span class=\"line\">LoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();</span><br><span class=\"line\">logger.info(context.getProperty(<span class=\"string\">\"file\"</span>));</span><br></pre></td></tr></table></div></figure>\n\n<h1 id=\"Spring替换commons-logging为slf4j\">Spring替换commons-logging为slf4j<a href=\"post/Java日志框架#Spring替换commons-logging为slf4j\"></a></h1><ol>\n<li><p>排除<code>spring-core.jar</code>对<code>commons-logging</code>的依赖</p>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>引入<code>slf4j</code></p>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.25<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>引入辅助包进行适配</p>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jcl-over-slf4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.25<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n<h1 id=\"MyBatis指定日志框架\">MyBatis指定日志框架<a href=\"post/Java日志框架#MyBatis指定日志框架\"></a></h1><p>在<code>SqlMapConfig.xml</code>中<code>settings</code>配置<code>logImpl</code></p>\n<blockquote>\n<p>可为SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</p>\n</blockquote>\n<figure class=\"highlight xml\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span> <span class=\"attr\">resource</span>=<span class=\"string\">\"jdbc.properties\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">\"logImpl\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"slf4j\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">\"bean\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">\"dev\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dev\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">\"JDBC\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">transactionManager</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driver\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.driver&#125;\"</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.url&#125;\"</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.username&#125;\"</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc.password&#125;\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">\"sqlmap/ManagerMapper.xml\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></div></figure>\n\n","prev":{"title":"配置文件整合","link":"post/配置文件整合"},"next":{"title":"MyBatis缓存","link":"post/MyBatis缓存"},"plink":"https://beginc.github.io/post/Java日志框架/","toc":[{"title":"Java日志框架分类","id":"Java日志框架分类","index":"1","children":[{"title":"日志实现框架","id":"日志实现框架","index":"1.1"},{"title":"日志门面框架","id":"日志门面框架","index":"1.2"}]},{"title":"SLF4J","id":"SLF4J","index":"2","children":[{"title":"包介绍","id":"包介绍","index":"2.1"},{"title":"绑定具体日志框架","id":"绑定具体日志框架","index":"2.2"},{"title":"使用","id":"使用","index":"2.3"}]},{"title":"Logback","id":"Logback","index":"3","children":[{"title":"包介绍","id":"包介绍-1","index":"3.1"},{"title":"Logger Context","id":"Logger-Context","index":"3.2"},{"title":"日志级别","id":"日志级别","index":"3.3","children":[{"title":"基本日志级别","id":"基本日志级别","index":"3.3.1"},{"title":"日志级别继承","id":"日志级别继承","index":"3.3.2"}]},{"title":"Appender","id":"Appender","index":"3.4"},{"title":"<code>Appender</code>的加性性质","id":"Appender的加性性质","index":"3.5"},{"title":"常用Appender","id":"常用Appender","index":"3.6","children":[{"title":"ConsoleAppender","id":"ConsoleAppender","index":"3.6.1"},{"title":"FileAppender","id":"FileAppender","index":"3.6.2"},{"title":"RollingFileAppender(TODO)","id":"RollingFileAppender-TODO","index":"3.6.3"}]},{"title":"配置","id":"配置","index":"3.7","children":[{"title":"找配置文件的步骤","id":"找配置文件的步骤","index":"3.7.1"},{"title":"基本配置","id":"基本配置","index":"3.7.2"},{"title":"详细配置","id":"详细配置","index":"3.7.3"}]}]},{"title":"Spring替换commons-logging为slf4j","id":"Spring替换commons-logging为slf4j","index":"4"},{"title":"MyBatis指定日志框架","id":"MyBatis指定日志框架","index":"5"}]}