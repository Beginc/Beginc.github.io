{"title":"webpack基本使用","date":"2020-01-08T10:46:42.000Z","date_formatted":{"ll":"Jan 8, 2020","L":"01/08/2020","MM-DD":"01-08"},"thumbnail":"post/Web/前端工程化/webpack基本使用/cover.png","link":"post/Web/前端工程化/webpack基本使用","categories":["Web","前端工程化"],"updated":"2020-02-11T13:42:35.932Z","content":"<h1 id=\"为何要使用webpack\">为何要使用webpack<a href=\"#为何要使用webpack\" title=\"为何要使用webpack\"></a></h1><ul><li>前端模块化开发</li>\n<li>资源打包，减少请求次数</li>\n</ul><h1 id=\"基本概念\">基本概念<a href=\"#基本概念\" title=\"基本概念\"></a></h1><h2 id=\"入口entry\">入口(entry)<a href=\"#入口entry\" title=\"入口(entry)\"></a></h2><p>webpack通过对各模块的依赖关系进行分析，构建出一个依赖关系图，然后将所有模块打包成一个(多个)bundle文件，入口指定了webpack从哪个文件开始构建依赖关系图。</p>\n<h2 id=\"出口outout\">出口(outout)<a href=\"#出口outout\" title=\"出口(outout)\"></a></h2><p>出口指定了webpack打包后如何输出。</p>\n<h2 id=\"loader\">loader<a href=\"#loader\" title=\"loader\"></a></h2><p>loader可以将所有类型的文件转换成webpack能够处理的有效模块，从而让webpack能够处理非JavaScript文件。总之可将其理解为预处理器。</p>\n<ul><li>图片</li>\n<li>字体</li>\n<li>样式（css、less、sass等）</li>\n<li>Vue组件</li>\n<li>ES6 JS文件（通过babel先进行转换）</li>\n</ul><h2 id=\"插件plugin\">插件(plugin)<a href=\"#插件plugin\" title=\"插件(plugin)\"></a></h2><p><strong>待进一步理解</strong></p>\n<h1 id=\"基本配置\">基本配置<a href=\"#基本配置\" title=\"基本配置\"></a></h1><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    mode: <span class=\"string\">'development'</span>,</span><br><span class=\"line\">    entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">        filename: <span class=\"string\">'bundle.js'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">        rules: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">                exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">                use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">                use: [<span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    plugins: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">            filename: <span class=\"string\">'index.html'</span>,</span><br><span class=\"line\">            template: <span class=\"string\">'template.html'</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    devServer: &#123;</span><br><span class=\"line\">        contentBase: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">        port: <span class=\"number\">8000</span>,</span><br><span class=\"line\">        hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        open: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"入口\">入口<a href=\"#入口\" title=\"入口\"></a></h2><p>entry指定入口文件</p>\n<h2 id=\"output\">output<a href=\"#output\" title=\"output\"></a></h2><p>path指定目录，filename指定文件名</p>\n<h2 id=\"loader-1\">loader<a href=\"#loader-1\" title=\"loader\"></a></h2><p>在module的rules中指定</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    test: 正则表达式,</span><br><span class=\"line\">    use: [loader1, loader2...]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>JS语法转换</strong></p>\n<ul><li>babel-loader</li>\n</ul><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -D babel-loader</span><br></pre></td></tr></table></figure>\n\n<p><strong>CSS</strong></p>\n<ul><li>[style-loader, css-loader, less-loader]</li>\n</ul><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -D css-loader style-loader less-loader</span><br></pre></td></tr></table></figure>\n\n<p><strong>图片与字体</strong></p>\n<ul><li>url-loader</li>\n</ul><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -D url-loader</span><br></pre></td></tr></table></figure>\n\n<p><strong>Vue组件</strong></p>\n<ul><li>vue-loader</li>\n</ul><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -D vue-loader vue-template-compiler</span><br></pre></td></tr></table></figure>\n\n<p>配置(vue-loader V15 还需配置plugin和css!!)</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> VueLoaderPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader/lib/plugin'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  mode: <span class=\"string\">'development'</span>,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'vue-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 它会应用到普通的 `.js` 文件</span></span><br><span class=\"line\">      <span class=\"comment\">// 以及 `.vue` 文件中的 `&lt;script&gt;` 块</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 它会应用到普通的 `.css` 文件</span></span><br><span class=\"line\">      <span class=\"comment\">// 以及 `.vue` 文件中的 `&lt;style&gt;` 块</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"string\">'vue-style-loader'</span>,</span><br><span class=\"line\">          <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// 请确保引入这个插件来施展魔法</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"插件\">插件<a href=\"#插件\" title=\"插件\"></a></h2><p>在module的plugins里面new出来。</p>\n<p><strong>html-webpack-plugin</strong>\n用于自动将打包好的bundle文件注入到html中</p>\n<ul><li>filename 指定注入html的文件名（无需存在）</li>\n<li>template 指定html模板文件（自己创建，可选）</li>\n</ul><h2 id=\"devserver\">devServer<a href=\"#devserver\" title=\"devServer\"></a></h2><p>可用于热加载, 在module的devServer下配置。</p>\n<ul><li>contentBase 托管的目录（写dist目录）</li>\n<li>port 端口</li>\n<li>hot 热加载（默认为true)</li>\n<li>open 是否自动打开页面</li>\n</ul>","prev":{"title":"Babel基本使用","link":"post/Web/前端工程化/Babel基本使用"},"next":{"title":"npm基本使用","link":"post/Web/前端工程化/npm基本使用"},"plink":"https://beginc.github.io/post/Web/前端工程化/webpack基本使用/","toc":[{"id":"为何要使用webpack","title":"为何要使用webpack","index":"1"},{"id":"基本概念","title":"基本概念","index":"2","children":[{"id":"入口entry","title":"入口(entry)","index":"2.1"},{"id":"出口outout","title":"出口(outout)","index":"2.2"},{"id":"loader","title":"loader","index":"2.3"},{"id":"插件plugin","title":"插件(plugin)","index":"2.4"}]},{"id":"基本配置","title":"基本配置","index":"3","children":[{"id":"入口","title":"入口","index":"3.1"},{"id":"output","title":"output","index":"3.2"},{"id":"loader-1","title":"loader","index":"3.3"},{"id":"插件","title":"插件","index":"3.4"},{"id":"devserver","title":"devServer","index":"3.5"}]}]}